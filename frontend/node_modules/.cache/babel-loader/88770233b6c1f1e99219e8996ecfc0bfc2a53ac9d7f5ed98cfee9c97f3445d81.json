{"ast":null,"code":"import React,{useEffect,useState,useCallback}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import axios from'axios';import Dashboard from'./components/user/Dashboard';import Earnings from'./components/user/Earnings';import Tasks from'./components/user/Tasks';import Ads from'./components/user/Ads';import Referrals from'./components/user/Referrals';import Withdrawals from'./components/user/Withdrawals';import Profile from'./components/user/Profile';import AdminLogin from'./components/admin/AdminLogin';import AdminDashboard from'./components/admin/AdminDashboard';import UserDetails from'./components/admin/UserDetails';import ErrorBoundary from'./components/common/ErrorBoundary';import{AuthProvider,useAuth,useSettings}from'./context/AuthContext';import{AdminThemeProvider}from'./context/AdminThemeContext';import'./App.css';// ============================================\n// PLATFORM DETECTION UTILITIES\n// ============================================\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function detectTelegramPlatform(){var _window$Telegram,_tg$platform;const tg=(_window$Telegram=window.Telegram)===null||_window$Telegram===void 0?void 0:_window$Telegram.WebApp;if(!tg)return{platform:'unknown',detected:false};const platform=((_tg$platform=tg.platform)===null||_tg$platform===void 0?void 0:_tg$platform.toLowerCase())||'';// Detect platform type\nif(platform==='web'||platform==='weba'||platform.includes('web')){return{platform:'web',detected:true,raw:platform};}if(platform==='tdesktop'||platform==='desktop'||platform.includes('desktop')){return{platform:'desktop',detected:true,raw:platform};}if(platform==='android'||platform==='ios'||platform==='mobile'||platform.includes('android')||platform.includes('ios')){return{platform:'mobile',detected:true,raw:platform};}// Fallback detection based on user agent\nconst ua=navigator.userAgent.toLowerCase();if(/android|iphone|ipad|ipod|mobile/i.test(ua)){return{platform:'mobile',detected:true,raw:platform||'ua-mobile'};}// Default to web if inside Telegram but platform unknown\nif(tg.initData){return{platform:'web',detected:true,raw:platform||'default-web'};}return{platform:'unknown',detected:false,raw:platform};}// ============================================\n// ADBLOCKER DETECTION UTILITY\n// ============================================\nasync function detectAdBlocker(){// Multiple detection methods for reliability\nconst checks=[];// Method 1: Create a bait element with multiple ad-related identifiers\nconst baitCheck=new Promise(resolve=>{const bait=document.createElement('div');bait.id='ad-container';bait.className='ad ads adsbox doubleclick ad-placement pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links ad-text adSense adBlock adBanner';bait.innerHTML='&nbsp;';bait.style.cssText='width: 300px !important; height: 250px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; background: #fff !important;';document.body.appendChild(bait);// Wait a bit for adblocker to process\nsetTimeout(()=>{let isBlocked=false;try{const computedStyle=window.getComputedStyle(bait);isBlocked=bait.offsetHeight===0||bait.offsetWidth===0||bait.offsetParent===null||bait.clientHeight===0||computedStyle.display==='none'||computedStyle.visibility==='hidden'||computedStyle.opacity==='0'||bait.innerHTML==='';}catch(e){isBlocked=true;}if(bait.parentNode){document.body.removeChild(bait);}resolve(isBlocked);},150);});checks.push(baitCheck);// Method 2: Create an actual ad-like iframe\nconst iframeCheck=new Promise(resolve=>{const iframe=document.createElement('iframe');iframe.id='ad-iframe';iframe.className='adsbox ad-frame';iframe.style.cssText='width: 300px; height: 250px; position: absolute; left: -10000px; top: -1000px; border: 0;';iframe.src='about:blank';document.body.appendChild(iframe);setTimeout(()=>{let isBlocked=false;try{const computedStyle=window.getComputedStyle(iframe);isBlocked=iframe.offsetHeight===0||iframe.offsetWidth===0||iframe.offsetParent===null||computedStyle.display==='none'||computedStyle.visibility==='hidden';}catch(e){isBlocked=true;}if(iframe.parentNode){document.body.removeChild(iframe);}resolve(isBlocked);},150);});checks.push(iframeCheck);// Method 3: Try to fetch known ad-related URLs (multiple endpoints)\nconst fetchCheck=new Promise(resolve=>{const testUrls=['https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js','https://www.googletagservices.com/tag/js/gpt.js','https://static.doubleclick.net/instream/ad_status.js'];const fetchPromises=testUrls.map(url=>{const controller=new AbortController();const timeoutId=setTimeout(()=>controller.abort(),1500);return fetch(url,{method:'HEAD',mode:'no-cors',cache:'no-store',signal:controller.signal}).then(()=>{clearTimeout(timeoutId);return false;// Successfully fetched = no adblocker\n}).catch(()=>{clearTimeout(timeoutId);return true;// Failed to fetch = likely blocked\n});});// If any fetch fails, consider it blocked\nPromise.all(fetchPromises).then(results=>{// If majority are blocked, adblocker is active\nconst blockedCount=results.filter(r=>r).length;resolve(blockedCount>=2);});});checks.push(fetchCheck);// Method 4: Script injection test\nconst scriptCheck=new Promise(resolve=>{const script=document.createElement('script');script.id='ads-check-script';script.type='text/javascript';script.src='data:text/javascript,window.__adCheckPassed=true';script.className='adsbygoogle';script.onload=()=>{if(script.parentNode)script.parentNode.removeChild(script);resolve(false);};script.onerror=()=>{if(script.parentNode)script.parentNode.removeChild(script);resolve(true);};document.head.appendChild(script);// Timeout fallback\nsetTimeout(()=>{if(script.parentNode)script.parentNode.removeChild(script);resolve(false);},500);});checks.push(scriptCheck);// Method 5: Check for specific adblocker signatures\nconst signatureCheck=new Promise(resolve=>{let detected=false;// Check for adblocker-specific elements or modifications\nconst signatures=[// Check if specific ad-blocking CSS rules exist\n()=>{const testEl=document.createElement('div');testEl.className='banner_ad';testEl.style.cssText='display: block !important; height: 10px !important; width: 10px !important;';document.body.appendChild(testEl);const hidden=window.getComputedStyle(testEl).display==='none'||testEl.offsetHeight===0;document.body.removeChild(testEl);return hidden;},// Check for ABP/uBlock origin style blocking\n()=>{const testEl=document.createElement('ins');testEl.className='adsbygoogle';testEl.style.cssText='display: block; height: 100px; width: 100px;';document.body.appendChild(testEl);const hidden=testEl.offsetHeight===0||window.getComputedStyle(testEl).display==='none';document.body.removeChild(testEl);return hidden;}];for(const check of signatures){try{if(check()){detected=true;break;}}catch(e){detected=true;}}resolve(detected);});checks.push(signatureCheck);// Run all checks\nconst results=await Promise.all(checks);// Return true if at least 2 methods detect blocking (reduces false positives)\nconst detectionCount=results.filter(r=>r===true).length;return detectionCount>=2;}// Set axios base URL\naxios.defaults.baseURL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';axios.defaults.timeout=30000;// 30 second timeout\naxios.defaults.headers.common['Content-Type']='application/json';// Retry configuration for failed requests\nconst MAX_RETRIES=3;const RETRY_DELAY=1000;// Start with 1 second\n// Helper function to delay with exponential backoff\nconst delay=ms=>new Promise(resolve=>setTimeout(resolve,ms));// Add token to requests\naxios.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}// Initialize retry count\nconfig.retryCount=config.retryCount||0;return config;},error=>{console.error('Request error:',error);return Promise.reject(error);});// Handle response errors with automatic retry\naxios.interceptors.response.use(response=>{return response;},async error=>{var _error$response,_error$response2,_error$response2$data,_error$response3,_error$response4;const config=error.config;// Log errors for debugging\nconsole.error('API Error:',{url:config===null||config===void 0?void 0:config.url,status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,message:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message,isNetworkError:!error.response,retryCount:(config===null||config===void 0?void 0:config.retryCount)||0});// Retry logic for network errors and 503 Service Unavailable\nconst shouldRetry=config&&config.retryCount<MAX_RETRIES&&(!error.response||// Network error\nerror.response.status===503||// Service unavailable\nerror.response.status===502||// Bad gateway\nerror.response.status===504||// Gateway timeout\nerror.response.status===429// Too many requests\n);if(shouldRetry){config.retryCount+=1;const backoffDelay=RETRY_DELAY*Math.pow(2,config.retryCount-1);console.log(\"Retrying request (\".concat(config.retryCount,\"/\").concat(MAX_RETRIES,\") after \").concat(backoffDelay,\"ms...\"));await delay(backoffDelay);return axios(config);}// Handle network errors (after retries exhausted)\nif(!error.response){error.message='Unable to connect to server. Please check your connection and try again.';return Promise.reject(error);}// Handle 503 Service Unavailable (after retries exhausted)\nif(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===503){error.message='Service temporarily unavailable. Please try again in a moment.';return Promise.reject(error);}// Handle 401 Unauthorized - but avoid redirect loops\nif(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)===401){var _config$url,_config$url2;const isAuthEndpoint=config===null||config===void 0?void 0:(_config$url=config.url)===null||_config$url===void 0?void 0:_config$url.includes('/auth/');const isAdminRoute=window.location.pathname.startsWith('/admin');const isAdminEndpoint=config===null||config===void 0?void 0:(_config$url2=config.url)===null||_config$url2===void 0?void 0:_config$url2.includes('/admin/');if(!isAuthEndpoint){// Handle admin vs user routes separately\nif(isAdminRoute||isAdminEndpoint){localStorage.removeItem('adminToken');localStorage.removeItem('admin');// Redirect to admin login\nif(window.location.pathname!=='/admin/login'){window.location.href='/admin/login';}}else{localStorage.removeItem('token');localStorage.removeItem('user');// Only redirect if not already on root\nif(window.location.pathname!=='/'){window.location.href='/';}}}}return Promise.reject(error);});// Helper function to get Telegram user data\nfunction getTelegramUserData(){var _window$Telegram2,_tg$initDataUnsafe,_tg$initDataUnsafe$us;const tg=(_window$Telegram2=window.Telegram)===null||_window$Telegram2===void 0?void 0:_window$Telegram2.WebApp;if(!tg){console.log('Telegram WebApp not available');return null;}console.log('Telegram WebApp object:',tg);console.log('Platform:',tg.platform);console.log('Version:',tg.version);console.log('initData:',tg.initData);console.log('initDataUnsafe:',JSON.stringify(tg.initDataUnsafe,null,2));// Method 1: Direct user object from initDataUnsafe\nif((_tg$initDataUnsafe=tg.initDataUnsafe)!==null&&_tg$initDataUnsafe!==void 0&&(_tg$initDataUnsafe$us=_tg$initDataUnsafe.user)!==null&&_tg$initDataUnsafe$us!==void 0&&_tg$initDataUnsafe$us.id){console.log('Got user from initDataUnsafe.user');return{user:tg.initDataUnsafe.user,startParam:tg.initDataUnsafe.start_param,initData:tg.initData};}// Method 2: Parse from initData URL params\nif(tg.initData){try{const params=new URLSearchParams(tg.initData);const userStr=params.get('user');if(userStr){const userData=JSON.parse(decodeURIComponent(userStr));console.log('Got user from parsing initData:',userData);return{user:userData,startParam:params.get('start_param'),initData:tg.initData};}}catch(e){console.error('Error parsing initData:',e);}}// Method 3: Check if running in iframe (Mini App mode)\nif(window.parent!==window){console.log('Running in iframe, likely Mini App');}return null;}function App(){const[telegramReady,setTelegramReady]=useState(false);useEffect(()=>{var _window$Telegram3;// Initialize Telegram Web App\nconst tg=(_window$Telegram3=window.Telegram)===null||_window$Telegram3===void 0?void 0:_window$Telegram3.WebApp;if(tg){var _tg$themeParams,_tg$themeParams2;// Set theme colors\ndocument.documentElement.style.setProperty('--tg-theme-bg-color',((_tg$themeParams=tg.themeParams)===null||_tg$themeParams===void 0?void 0:_tg$themeParams.bg_color)||'#ffffff');document.documentElement.style.setProperty('--tg-theme-text-color',((_tg$themeParams2=tg.themeParams)===null||_tg$themeParams2===void 0?void 0:_tg$themeParams2.text_color)||'#000000');// Tell Telegram we're ready\ntg.ready();tg.expand();// Small delay to ensure everything is loaded\nsetTimeout(()=>{setTelegramReady(true);},100);}else{// Not in Telegram\nsetTelegramReady(true);}},[]);if(!telegramReady){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner large\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Initializing...\"})]})});}return/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/admin/*\",element:/*#__PURE__*/_jsx(AdminApp,{})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(UserApp,{})})]})})})});}function UserApp(){const{user,loading,login}=useAuth();const{settings}=useSettings();const[initializing,setInitializing]=useState(true);const[error,setError]=useState(null);const[debugInfo,setDebugInfo]=useState('');// Access control states\nconst[accessBlocked,setAccessBlocked]=useState(null);const[platformInfo,setPlatformInfo]=useState(null);// eslint-disable-next-line no-unused-vars\nconst[hasAdblocker,setHasAdblocker]=useState(false);// Check platform and adblocker access\nconst checkAccessControl=useCallback(async currentSettings=>{const accessControl=currentSettings===null||currentSettings===void 0?void 0:currentSettings.accessControl;if(!accessControl){return;}// Detect platform\nconst platform=detectTelegramPlatform();setPlatformInfo(platform);// Check platform restrictions\nif(platform.detected){if(platform.platform==='web'&&!accessControl.telegramWebEnabled){setAccessBlocked({type:'platform',platform:'Telegram Web',icon:'ðŸŒ',message:'Access from Telegram Web is currently disabled.',subMessage:'Please use Telegram Mobile or Desktop app to access this application.'});return;}if(platform.platform==='desktop'&&!accessControl.telegramDesktopEnabled){setAccessBlocked({type:'platform',platform:'Telegram Desktop',icon:'ðŸ’»',message:'Access from Telegram Desktop is currently disabled.',subMessage:'Please use Telegram Mobile or Web version to access this application.'});return;}if(platform.platform==='mobile'&&!accessControl.telegramMobileEnabled){setAccessBlocked({type:'platform',platform:'Telegram Mobile',icon:'ðŸ“±',message:'Access from Telegram Mobile is currently disabled.',subMessage:'Please use Telegram Desktop or Web version to access this application.'});return;}}// Check adblocker if enforcement is enabled\nif(accessControl.adblockerEnforcementEnabled){try{const adblockDetected=await detectAdBlocker();setHasAdblocker(adblockDetected);if(adblockDetected){setAccessBlocked({type:'adblocker',icon:'ðŸ›¡ï¸',message:'Ad Blocker Detected',subMessage:'Please disable your ad blocker to access this application. Our service relies on advertisements to remain free.'});return;}}catch(e){console.error('Adblocker detection error:',e);}}// All checks passed\nsetAccessBlocked(null);},[]);// Re-check access when settings change\nuseEffect(()=>{if(settings){checkAccessControl(settings);}},[settings,checkAccessControl]);const initTelegramAuth=useCallback(async()=>{try{var _window$Telegram4,_telegramData$user;const tg=(_window$Telegram4=window.Telegram)===null||_window$Telegram4===void 0?void 0:_window$Telegram4.WebApp;const telegramData=getTelegramUserData();setDebugInfo(\"Platform: \".concat((tg===null||tg===void 0?void 0:tg.platform)||'none',\", Has initData: \").concat(!!(tg!==null&&tg!==void 0&&tg.initData)));if(telegramData&&(_telegramData$user=telegramData.user)!==null&&_telegramData$user!==void 0&&_telegramData$user.id){// We have valid Telegram user data - authenticate\nconsole.log('Authenticating user:',telegramData.user);const response=await axios.post('/auth/telegram',{id:telegramData.user.id,username:telegramData.user.username||'',first_name:telegramData.user.first_name||'',last_name:telegramData.user.last_name||'',referralCode:telegramData.startParam,initData:telegramData.initData});localStorage.setItem('token',response.data.token);localStorage.setItem('user',JSON.stringify(response.data.user));login(response.data.user);}else if(tg&&tg.initData){var _retryData$user;// Inside Telegram but couldn't parse user - try once more after delay\nconsole.log('Has initData but no user, retrying...');await new Promise(resolve=>setTimeout(resolve,500));const retryData=getTelegramUserData();if(retryData&&(_retryData$user=retryData.user)!==null&&_retryData$user!==void 0&&_retryData$user.id){const response=await axios.post('/auth/telegram',{id:retryData.user.id,username:retryData.user.username||'',first_name:retryData.user.first_name||'',last_name:retryData.user.last_name||'',referralCode:retryData.startParam,initData:retryData.initData});localStorage.setItem('token',response.data.token);localStorage.setItem('user',JSON.stringify(response.data.user));login(response.data.user);}else{setError('Could not retrieve user data from Telegram. Please restart the app.');}}else{// Not in Telegram - check for existing session\nconst storedToken=localStorage.getItem('token');if(storedToken){try{const response=await axios.get('/auth/verify');login(response.data.user);}catch(err){localStorage.removeItem('token');localStorage.removeItem('user');}}}}catch(err){var _err$response,_err$response$data;console.error('Auth error:',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Authentication failed. Please try again.');}finally{setInitializing(false);}},[login]);useEffect(()=>{initTelegramAuth();},[initTelegramAuth]);// Update document title with app name from settings\nuseEffect(()=>{if(settings!==null&&settings!==void 0&&settings.appName){document.title=settings.appName;}},[settings===null||settings===void 0?void 0:settings.appName]);if(initializing||loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner large\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please wait while we set things up\"})]})});}// Access Control Block Screen - Platform or Adblocker restriction\nif(accessBlocked){return/*#__PURE__*/_jsx(\"div\",{className:\"access-blocked-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"access-blocked-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"access-blocked-icon\",children:accessBlocked.icon}),/*#__PURE__*/_jsx(\"h2\",{children:accessBlocked.type==='platform'?'Platform Restricted':accessBlocked.message}),/*#__PURE__*/_jsx(\"p\",{className:\"access-blocked-message\",children:accessBlocked.type==='platform'?accessBlocked.message:accessBlocked.subMessage}),accessBlocked.type==='platform'&&/*#__PURE__*/_jsx(\"p\",{className:\"access-blocked-sub\",children:accessBlocked.subMessage}),accessBlocked.type==='adblocker'&&/*#__PURE__*/_jsxs(\"div\",{className:\"access-blocked-instructions\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"How to disable your ad blocker:\"}),/*#__PURE__*/_jsxs(\"ol\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Click on your ad blocker extension icon\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Select \\\"Pause\\\" or \\\"Disable\\\" for this site\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Refresh this page\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>window.location.reload(),style:{marginTop:'20px'},children:\"\\uD83D\\uDD04 I've Disabled Ad Blocker - Refresh\"})]}),platformInfo&&/*#__PURE__*/_jsx(\"div\",{className:\"access-blocked-debug\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"Platform: \",platformInfo.raw||platformInfo.platform]})})]})});}// Check if user is suspended or banned\nif(user&&user.status&&user.status!=='active'){// Build support Telegram link\nconst supportId=(settings===null||settings===void 0?void 0:settings.supportTelegramId)||'';const supportLink=supportId.startsWith('@')?\"https://t.me/\".concat(supportId.slice(1)):supportId.startsWith('https://')||supportId.startsWith('http://')?supportId:supportId?\"https://t.me/\".concat(supportId):null;return/*#__PURE__*/_jsx(\"div\",{className:\"blocked-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"blocked-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"blocked-icon\",children:user.status==='banned'?'ðŸš«':'âš ï¸'}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Account \",user.status==='banned'?'Banned':'Suspended']}),/*#__PURE__*/_jsx(\"p\",{className:\"blocked-message\",children:user.status==='banned'?'Your account has been permanently banned due to policy violations.':'Your account has been temporarily suspended.'}),/*#__PURE__*/_jsx(\"p\",{className:\"blocked-sub\",children:\"If you believe this is a mistake, please contact our support team.\"}),supportLink&&/*#__PURE__*/_jsx(\"a\",{href:supportLink,target:\"_blank\",rel:\"noopener noreferrer\",className:\"btn btn-primary\",style:{marginTop:'20px',display:'inline-block',textDecoration:'none'},children:\"\\uD83D\\uDCAC Contact Support\"})]})});}if(!user){var _window$Telegram5;const tg=(_window$Telegram5=window.Telegram)===null||_window$Telegram5===void 0?void 0:_window$Telegram5.WebApp;return/*#__PURE__*/_jsx(\"div\",{className:\"welcome-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"welcome-icon\",children:\"\\u26A1\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome!\"}),error?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"error-text\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>{setError(null);setInitializing(true);initTelegramAuth();},style:{marginTop:'15px'},children:\"Try Again\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px',padding:'12px',background:'#1a1a2e',borderRadius:'8px',textAlign:'left',fontSize:'11px',fontFamily:'monospace',color:'#0f0',maxHeight:'150px',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:'#ff0',marginBottom:'4px'},children:[\"API: \",axios.defaults.baseURL]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#ff0',marginBottom:'4px'},children:[\"Platform: \",(tg===null||tg===void 0?void 0:tg.platform)||'none']}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#ff0',marginBottom:'4px'},children:[\"Has initData: \",!!(tg!==null&&tg!==void 0&&tg.initData)]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#ff0',marginBottom:'4px'},children:[\"Token: \",localStorage.getItem('token')?'Present':'Missing']}),/*#__PURE__*/_jsx(\"div\",{style:{wordBreak:'break-all'},children:debugInfo})]})]}):tg!==null&&tg!==void 0&&tg.initData?/*#__PURE__*/_jsx(\"p\",{children:\"Authenticating with Telegram...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Please open this app from Telegram to continue.\"}),/*#__PURE__*/_jsx(\"a\",{href:\"https://t.me/miniFaucet_bot\",className:\"btn btn-primary\",style:{marginTop:'20px',display:'inline-block',textDecoration:'none'},children:\"Open in Telegram\"})]}),debugInfo&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"welcome-debug\",children:/*#__PURE__*/_jsx(\"small\",{children:debugInfo})})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Dashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/earnings\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Earnings,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/tasks\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Tasks,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/ads\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Ads,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/referrals\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Referrals,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/withdrawals\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Withdrawals,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(Profile,{})})})]})});}function AdminApp(){const{admin}=useAuth();return/*#__PURE__*/_jsx(AdminThemeProvider,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:admin?/*#__PURE__*/_jsx(Navigate,{to:\"/admin\",replace:true}):/*#__PURE__*/_jsx(AdminLogin,{})}),/*#__PURE__*/_jsx(Route,{path:\"/users/:id\",element:admin?/*#__PURE__*/_jsx(UserDetails,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/admin/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:admin?/*#__PURE__*/_jsx(AdminDashboard,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/admin/login\",replace:true})})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","useCallback","BrowserRouter","Router","Routes","Route","Navigate","axios","Dashboard","Earnings","Tasks","Ads","Referrals","Withdrawals","Profile","AdminLogin","AdminDashboard","UserDetails","ErrorBoundary","AuthProvider","useAuth","useSettings","AdminThemeProvider","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","detectTelegramPlatform","_window$Telegram","_tg$platform","tg","window","Telegram","WebApp","platform","detected","toLowerCase","includes","raw","ua","navigator","userAgent","test","initData","detectAdBlocker","checks","baitCheck","Promise","resolve","bait","document","createElement","id","className","innerHTML","style","cssText","body","appendChild","setTimeout","isBlocked","computedStyle","getComputedStyle","offsetHeight","offsetWidth","offsetParent","clientHeight","display","visibility","opacity","e","parentNode","removeChild","push","iframeCheck","iframe","src","fetchCheck","testUrls","fetchPromises","map","url","controller","AbortController","timeoutId","abort","fetch","method","mode","cache","signal","then","clearTimeout","catch","all","results","blockedCount","filter","r","length","scriptCheck","script","type","onload","onerror","head","signatureCheck","signatures","testEl","hidden","check","detectionCount","defaults","baseURL","process","env","REACT_APP_API_URL","timeout","headers","common","MAX_RETRIES","RETRY_DELAY","delay","ms","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","retryCount","error","console","reject","response","_error$response","_error$response2","_error$response2$data","_error$response3","_error$response4","status","message","data","isNetworkError","shouldRetry","backoffDelay","Math","pow","log","_config$url","_config$url2","isAuthEndpoint","isAdminRoute","location","pathname","startsWith","isAdminEndpoint","removeItem","href","getTelegramUserData","_window$Telegram2","_tg$initDataUnsafe","_tg$initDataUnsafe$us","version","JSON","stringify","initDataUnsafe","user","startParam","start_param","params","URLSearchParams","userStr","get","userData","parse","decodeURIComponent","parent","App","telegramReady","setTelegramReady","_window$Telegram3","_tg$themeParams","_tg$themeParams2","documentElement","setProperty","themeParams","bg_color","text_color","ready","expand","children","path","element","AdminApp","UserApp","loading","login","settings","initializing","setInitializing","setError","debugInfo","setDebugInfo","accessBlocked","setAccessBlocked","platformInfo","setPlatformInfo","hasAdblocker","setHasAdblocker","checkAccessControl","currentSettings","accessControl","telegramWebEnabled","icon","subMessage","telegramDesktopEnabled","telegramMobileEnabled","adblockerEnforcementEnabled","adblockDetected","initTelegramAuth","_window$Telegram4","_telegramData$user","telegramData","post","username","first_name","last_name","referralCode","setItem","_retryData$user","retryData","storedToken","err","_err$response","_err$response$data","appName","title","onClick","reload","marginTop","supportId","supportTelegramId","supportLink","slice","target","rel","textDecoration","_window$Telegram5","padding","background","borderRadius","textAlign","fontSize","fontFamily","color","maxHeight","overflow","marginBottom","wordBreak","admin","to","replace"],"sources":["/workspaces/claimpto/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Dashboard from './components/user/Dashboard';\nimport Earnings from './components/user/Earnings';\nimport Tasks from './components/user/Tasks';\nimport Ads from './components/user/Ads';\nimport Referrals from './components/user/Referrals';\nimport Withdrawals from './components/user/Withdrawals';\nimport Profile from './components/user/Profile';\nimport AdminLogin from './components/admin/AdminLogin';\nimport AdminDashboard from './components/admin/AdminDashboard';\nimport UserDetails from './components/admin/UserDetails';\nimport ErrorBoundary from './components/common/ErrorBoundary';\nimport { AuthProvider, useAuth, useSettings } from './context/AuthContext';\nimport { AdminThemeProvider } from './context/AdminThemeContext';\nimport './App.css';\n\n// ============================================\n// PLATFORM DETECTION UTILITIES\n// ============================================\nfunction detectTelegramPlatform() {\n  const tg = window.Telegram?.WebApp;\n  if (!tg) return { platform: 'unknown', detected: false };\n  \n  const platform = tg.platform?.toLowerCase() || '';\n  \n  // Detect platform type\n  if (platform === 'web' || platform === 'weba' || platform.includes('web')) {\n    return { platform: 'web', detected: true, raw: platform };\n  }\n  if (platform === 'tdesktop' || platform === 'desktop' || platform.includes('desktop')) {\n    return { platform: 'desktop', detected: true, raw: platform };\n  }\n  if (platform === 'android' || platform === 'ios' || platform === 'mobile' || \n      platform.includes('android') || platform.includes('ios')) {\n    return { platform: 'mobile', detected: true, raw: platform };\n  }\n  \n  // Fallback detection based on user agent\n  const ua = navigator.userAgent.toLowerCase();\n  if (/android|iphone|ipad|ipod|mobile/i.test(ua)) {\n    return { platform: 'mobile', detected: true, raw: platform || 'ua-mobile' };\n  }\n  \n  // Default to web if inside Telegram but platform unknown\n  if (tg.initData) {\n    return { platform: 'web', detected: true, raw: platform || 'default-web' };\n  }\n  \n  return { platform: 'unknown', detected: false, raw: platform };\n}\n\n// ============================================\n// ADBLOCKER DETECTION UTILITY\n// ============================================\nasync function detectAdBlocker() {\n  // Multiple detection methods for reliability\n  const checks = [];\n  \n  // Method 1: Create a bait element with multiple ad-related identifiers\n  const baitCheck = new Promise((resolve) => {\n    const bait = document.createElement('div');\n    bait.id = 'ad-container';\n    bait.className = 'ad ads adsbox doubleclick ad-placement pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links ad-text adSense adBlock adBanner';\n    bait.innerHTML = '&nbsp;';\n    bait.style.cssText = 'width: 300px !important; height: 250px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; background: #fff !important;';\n    document.body.appendChild(bait);\n    \n    // Wait a bit for adblocker to process\n    setTimeout(() => {\n      let isBlocked = false;\n      try {\n        const computedStyle = window.getComputedStyle(bait);\n        isBlocked = bait.offsetHeight === 0 || \n                    bait.offsetWidth === 0 || \n                    bait.offsetParent === null ||\n                    bait.clientHeight === 0 ||\n                    computedStyle.display === 'none' ||\n                    computedStyle.visibility === 'hidden' ||\n                    computedStyle.opacity === '0' ||\n                    bait.innerHTML === '';\n      } catch (e) {\n        isBlocked = true;\n      }\n      if (bait.parentNode) {\n        document.body.removeChild(bait);\n      }\n      resolve(isBlocked);\n    }, 150);\n  });\n  checks.push(baitCheck);\n  \n  // Method 2: Create an actual ad-like iframe\n  const iframeCheck = new Promise((resolve) => {\n    const iframe = document.createElement('iframe');\n    iframe.id = 'ad-iframe';\n    iframe.className = 'adsbox ad-frame';\n    iframe.style.cssText = 'width: 300px; height: 250px; position: absolute; left: -10000px; top: -1000px; border: 0;';\n    iframe.src = 'about:blank';\n    document.body.appendChild(iframe);\n    \n    setTimeout(() => {\n      let isBlocked = false;\n      try {\n        const computedStyle = window.getComputedStyle(iframe);\n        isBlocked = iframe.offsetHeight === 0 || \n                    iframe.offsetWidth === 0 ||\n                    iframe.offsetParent === null ||\n                    computedStyle.display === 'none' ||\n                    computedStyle.visibility === 'hidden';\n      } catch (e) {\n        isBlocked = true;\n      }\n      if (iframe.parentNode) {\n        document.body.removeChild(iframe);\n      }\n      resolve(isBlocked);\n    }, 150);\n  });\n  checks.push(iframeCheck);\n  \n  // Method 3: Try to fetch known ad-related URLs (multiple endpoints)\n  const fetchCheck = new Promise((resolve) => {\n    const testUrls = [\n      'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js',\n      'https://www.googletagservices.com/tag/js/gpt.js',\n      'https://static.doubleclick.net/instream/ad_status.js'\n    ];\n    \n    const fetchPromises = testUrls.map(url => {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 1500);\n      \n      return fetch(url, { \n        method: 'HEAD', \n        mode: 'no-cors',\n        cache: 'no-store',\n        signal: controller.signal \n      })\n        .then(() => {\n          clearTimeout(timeoutId);\n          return false; // Successfully fetched = no adblocker\n        })\n        .catch(() => {\n          clearTimeout(timeoutId);\n          return true; // Failed to fetch = likely blocked\n        });\n    });\n    \n    // If any fetch fails, consider it blocked\n    Promise.all(fetchPromises).then(results => {\n      // If majority are blocked, adblocker is active\n      const blockedCount = results.filter(r => r).length;\n      resolve(blockedCount >= 2);\n    });\n  });\n  checks.push(fetchCheck);\n  \n  // Method 4: Script injection test\n  const scriptCheck = new Promise((resolve) => {\n    const script = document.createElement('script');\n    script.id = 'ads-check-script';\n    script.type = 'text/javascript';\n    script.src = 'data:text/javascript,window.__adCheckPassed=true';\n    script.className = 'adsbygoogle';\n    \n    script.onload = () => {\n      if (script.parentNode) script.parentNode.removeChild(script);\n      resolve(false);\n    };\n    script.onerror = () => {\n      if (script.parentNode) script.parentNode.removeChild(script);\n      resolve(true);\n    };\n    \n    document.head.appendChild(script);\n    \n    // Timeout fallback\n    setTimeout(() => {\n      if (script.parentNode) script.parentNode.removeChild(script);\n      resolve(false);\n    }, 500);\n  });\n  checks.push(scriptCheck);\n  \n  // Method 5: Check for specific adblocker signatures\n  const signatureCheck = new Promise((resolve) => {\n    let detected = false;\n    \n    // Check for adblocker-specific elements or modifications\n    const signatures = [\n      // Check if specific ad-blocking CSS rules exist\n      () => {\n        const testEl = document.createElement('div');\n        testEl.className = 'banner_ad';\n        testEl.style.cssText = 'display: block !important; height: 10px !important; width: 10px !important;';\n        document.body.appendChild(testEl);\n        const hidden = window.getComputedStyle(testEl).display === 'none' || testEl.offsetHeight === 0;\n        document.body.removeChild(testEl);\n        return hidden;\n      },\n      // Check for ABP/uBlock origin style blocking\n      () => {\n        const testEl = document.createElement('ins');\n        testEl.className = 'adsbygoogle';\n        testEl.style.cssText = 'display: block; height: 100px; width: 100px;';\n        document.body.appendChild(testEl);\n        const hidden = testEl.offsetHeight === 0 || window.getComputedStyle(testEl).display === 'none';\n        document.body.removeChild(testEl);\n        return hidden;\n      }\n    ];\n    \n    for (const check of signatures) {\n      try {\n        if (check()) {\n          detected = true;\n          break;\n        }\n      } catch (e) {\n        detected = true;\n      }\n    }\n    \n    resolve(detected);\n  });\n  checks.push(signatureCheck);\n  \n  // Run all checks\n  const results = await Promise.all(checks);\n  \n  // Return true if at least 2 methods detect blocking (reduces false positives)\n  const detectionCount = results.filter(r => r === true).length;\n  return detectionCount >= 2;\n}\n\n// Set axios base URL\naxios.defaults.baseURL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\naxios.defaults.timeout = 30000; // 30 second timeout\naxios.defaults.headers.common['Content-Type'] = 'application/json';\n\n// Retry configuration for failed requests\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY = 1000; // Start with 1 second\n\n// Helper function to delay with exponential backoff\nconst delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));\n\n// Add token to requests\naxios.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    // Initialize retry count\n    config.retryCount = config.retryCount || 0;\n    return config;\n  },\n  (error) => {\n    console.error('Request error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Handle response errors with automatic retry\naxios.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  async (error) => {\n    const config = error.config;\n    \n    // Log errors for debugging\n    console.error('API Error:', {\n      url: config?.url,\n      status: error.response?.status,\n      message: error.response?.data?.message || error.message,\n      isNetworkError: !error.response,\n      retryCount: config?.retryCount || 0\n    });\n\n    // Retry logic for network errors and 503 Service Unavailable\n    const shouldRetry = (\n      config && \n      config.retryCount < MAX_RETRIES &&\n      (\n        !error.response || // Network error\n        error.response.status === 503 || // Service unavailable\n        error.response.status === 502 || // Bad gateway\n        error.response.status === 504 || // Gateway timeout\n        error.response.status === 429    // Too many requests\n      )\n    );\n\n    if (shouldRetry) {\n      config.retryCount += 1;\n      const backoffDelay = RETRY_DELAY * Math.pow(2, config.retryCount - 1);\n      console.log(`Retrying request (${config.retryCount}/${MAX_RETRIES}) after ${backoffDelay}ms...`);\n      await delay(backoffDelay);\n      return axios(config);\n    }\n\n    // Handle network errors (after retries exhausted)\n    if (!error.response) {\n      error.message = 'Unable to connect to server. Please check your connection and try again.';\n      return Promise.reject(error);\n    }\n\n    // Handle 503 Service Unavailable (after retries exhausted)\n    if (error.response?.status === 503) {\n      error.message = 'Service temporarily unavailable. Please try again in a moment.';\n      return Promise.reject(error);\n    }\n\n    // Handle 401 Unauthorized - but avoid redirect loops\n    if (error.response?.status === 401) {\n      const isAuthEndpoint = config?.url?.includes('/auth/');\n      const isAdminRoute = window.location.pathname.startsWith('/admin');\n      const isAdminEndpoint = config?.url?.includes('/admin/');\n      \n      if (!isAuthEndpoint) {\n        // Handle admin vs user routes separately\n        if (isAdminRoute || isAdminEndpoint) {\n          localStorage.removeItem('adminToken');\n          localStorage.removeItem('admin');\n          // Redirect to admin login\n          if (window.location.pathname !== '/admin/login') {\n            window.location.href = '/admin/login';\n          }\n        } else {\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n          // Only redirect if not already on root\n          if (window.location.pathname !== '/') {\n            window.location.href = '/';\n          }\n        }\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\n// Helper function to get Telegram user data\nfunction getTelegramUserData() {\n  const tg = window.Telegram?.WebApp;\n  \n  if (!tg) {\n    console.log('Telegram WebApp not available');\n    return null;\n  }\n\n  console.log('Telegram WebApp object:', tg);\n  console.log('Platform:', tg.platform);\n  console.log('Version:', tg.version);\n  console.log('initData:', tg.initData);\n  console.log('initDataUnsafe:', JSON.stringify(tg.initDataUnsafe, null, 2));\n\n  // Method 1: Direct user object from initDataUnsafe\n  if (tg.initDataUnsafe?.user?.id) {\n    console.log('Got user from initDataUnsafe.user');\n    return {\n      user: tg.initDataUnsafe.user,\n      startParam: tg.initDataUnsafe.start_param,\n      initData: tg.initData\n    };\n  }\n\n  // Method 2: Parse from initData URL params\n  if (tg.initData) {\n    try {\n      const params = new URLSearchParams(tg.initData);\n      const userStr = params.get('user');\n      if (userStr) {\n        const userData = JSON.parse(decodeURIComponent(userStr));\n        console.log('Got user from parsing initData:', userData);\n        return {\n          user: userData,\n          startParam: params.get('start_param'),\n          initData: tg.initData\n        };\n      }\n    } catch (e) {\n      console.error('Error parsing initData:', e);\n    }\n  }\n\n  // Method 3: Check if running in iframe (Mini App mode)\n  if (window.parent !== window) {\n    console.log('Running in iframe, likely Mini App');\n  }\n\n  return null;\n}\n\nfunction App() {\n  const [telegramReady, setTelegramReady] = useState(false);\n\n  useEffect(() => {\n    // Initialize Telegram Web App\n    const tg = window.Telegram?.WebApp;\n    if (tg) {\n      // Set theme colors\n      document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams?.bg_color || '#ffffff');\n      document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams?.text_color || '#000000');\n      \n      // Tell Telegram we're ready\n      tg.ready();\n      tg.expand();\n      \n      // Small delay to ensure everything is loaded\n      setTimeout(() => {\n        setTelegramReady(true);\n      }, 100);\n    } else {\n      // Not in Telegram\n      setTelegramReady(true);\n    }\n  }, []);\n\n  if (!telegramReady) {\n    return (\n      <div className=\"loading-screen\">\n        <div className=\"loading-content\">\n          <div className=\"loading-spinner large\"></div>\n          <h2>Initializing...</h2>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <ErrorBoundary>\n      <AuthProvider>\n        <Router>\n          <Routes>\n            <Route path=\"/admin/*\" element={<AdminApp />} />\n            <Route path=\"/*\" element={<UserApp />} />\n          </Routes>\n        </Router>\n      </AuthProvider>\n    </ErrorBoundary>\n  );\n}\n\nfunction UserApp() {\n  const { user, loading, login } = useAuth();\n  const { settings } = useSettings();\n  const [initializing, setInitializing] = useState(true);\n  const [error, setError] = useState(null);\n  const [debugInfo, setDebugInfo] = useState('');\n  \n  // Access control states\n  const [accessBlocked, setAccessBlocked] = useState(null);\n  const [platformInfo, setPlatformInfo] = useState(null);\n  // eslint-disable-next-line no-unused-vars\n  const [hasAdblocker, setHasAdblocker] = useState(false);\n\n  // Check platform and adblocker access\n  const checkAccessControl = useCallback(async (currentSettings) => {\n    const accessControl = currentSettings?.accessControl;\n    if (!accessControl) {\n      return;\n    }\n\n    // Detect platform\n    const platform = detectTelegramPlatform();\n    setPlatformInfo(platform);\n\n    // Check platform restrictions\n    if (platform.detected) {\n      if (platform.platform === 'web' && !accessControl.telegramWebEnabled) {\n        setAccessBlocked({\n          type: 'platform',\n          platform: 'Telegram Web',\n          icon: 'ðŸŒ',\n          message: 'Access from Telegram Web is currently disabled.',\n          subMessage: 'Please use Telegram Mobile or Desktop app to access this application.'\n        });\n        return;\n      }\n      if (platform.platform === 'desktop' && !accessControl.telegramDesktopEnabled) {\n        setAccessBlocked({\n          type: 'platform',\n          platform: 'Telegram Desktop',\n          icon: 'ðŸ’»',\n          message: 'Access from Telegram Desktop is currently disabled.',\n          subMessage: 'Please use Telegram Mobile or Web version to access this application.'\n        });\n        return;\n      }\n      if (platform.platform === 'mobile' && !accessControl.telegramMobileEnabled) {\n        setAccessBlocked({\n          type: 'platform',\n          platform: 'Telegram Mobile',\n          icon: 'ðŸ“±',\n          message: 'Access from Telegram Mobile is currently disabled.',\n          subMessage: 'Please use Telegram Desktop or Web version to access this application.'\n        });\n        return;\n      }\n    }\n\n    // Check adblocker if enforcement is enabled\n    if (accessControl.adblockerEnforcementEnabled) {\n      try {\n        const adblockDetected = await detectAdBlocker();\n        setHasAdblocker(adblockDetected);\n        \n        if (adblockDetected) {\n          setAccessBlocked({\n            type: 'adblocker',\n            icon: 'ðŸ›¡ï¸',\n            message: 'Ad Blocker Detected',\n            subMessage: 'Please disable your ad blocker to access this application. Our service relies on advertisements to remain free.'\n          });\n          return;\n        }\n      } catch (e) {\n        console.error('Adblocker detection error:', e);\n      }\n    }\n\n    // All checks passed\n    setAccessBlocked(null);\n  }, []);\n\n  // Re-check access when settings change\n  useEffect(() => {\n    if (settings) {\n      checkAccessControl(settings);\n    }\n  }, [settings, checkAccessControl]);\n\n  const initTelegramAuth = useCallback(async () => {\n    try {\n      const tg = window.Telegram?.WebApp;\n      const telegramData = getTelegramUserData();\n      \n      setDebugInfo(`Platform: ${tg?.platform || 'none'}, Has initData: ${!!tg?.initData}`);\n      \n      if (telegramData && telegramData.user?.id) {\n        // We have valid Telegram user data - authenticate\n        console.log('Authenticating user:', telegramData.user);\n        \n        const response = await axios.post('/auth/telegram', {\n          id: telegramData.user.id,\n          username: telegramData.user.username || '',\n          first_name: telegramData.user.first_name || '',\n          last_name: telegramData.user.last_name || '',\n          referralCode: telegramData.startParam,\n          initData: telegramData.initData\n        });\n        \n        localStorage.setItem('token', response.data.token);\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n        login(response.data.user);\n        \n      } else if (tg && tg.initData) {\n        // Inside Telegram but couldn't parse user - try once more after delay\n        console.log('Has initData but no user, retrying...');\n        await new Promise(resolve => setTimeout(resolve, 500));\n        \n        const retryData = getTelegramUserData();\n        if (retryData && retryData.user?.id) {\n          const response = await axios.post('/auth/telegram', {\n            id: retryData.user.id,\n            username: retryData.user.username || '',\n            first_name: retryData.user.first_name || '',\n            last_name: retryData.user.last_name || '',\n            referralCode: retryData.startParam,\n            initData: retryData.initData\n          });\n          \n          localStorage.setItem('token', response.data.token);\n          localStorage.setItem('user', JSON.stringify(response.data.user));\n          login(response.data.user);\n        } else {\n          setError('Could not retrieve user data from Telegram. Please restart the app.');\n        }\n      } else {\n        // Not in Telegram - check for existing session\n        const storedToken = localStorage.getItem('token');\n        if (storedToken) {\n          try {\n            const response = await axios.get('/auth/verify');\n            login(response.data.user);\n          } catch (err) {\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n          }\n        }\n      }\n    } catch (err) {\n      console.error('Auth error:', err);\n      setError(err.response?.data?.message || 'Authentication failed. Please try again.');\n    } finally {\n      setInitializing(false);\n    }\n  }, [login]);\n\n  useEffect(() => {\n    initTelegramAuth();\n  }, [initTelegramAuth]);\n\n  // Update document title with app name from settings\n  useEffect(() => {\n    if (settings?.appName) {\n      document.title = settings.appName;\n    }\n  }, [settings?.appName]);\n\n  if (initializing || loading) {\n    return (\n      <div className=\"loading-screen\">\n        <div className=\"loading-content\">\n          <div className=\"loading-spinner large\"></div>\n          <h2>Loading...</h2>\n          <p>Please wait while we set things up</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Access Control Block Screen - Platform or Adblocker restriction\n  if (accessBlocked) {\n    return (\n      <div className=\"access-blocked-screen\">\n        <div className=\"access-blocked-card\">\n          <div className=\"access-blocked-icon\">{accessBlocked.icon}</div>\n          <h2>{accessBlocked.type === 'platform' ? 'Platform Restricted' : accessBlocked.message}</h2>\n          <p className=\"access-blocked-message\">\n            {accessBlocked.type === 'platform' ? accessBlocked.message : accessBlocked.subMessage}\n          </p>\n          {accessBlocked.type === 'platform' && (\n            <p className=\"access-blocked-sub\">{accessBlocked.subMessage}</p>\n          )}\n          {accessBlocked.type === 'adblocker' && (\n            <div className=\"access-blocked-instructions\">\n              <h4>How to disable your ad blocker:</h4>\n              <ol>\n                <li>Click on your ad blocker extension icon</li>\n                <li>Select \"Pause\" or \"Disable\" for this site</li>\n                <li>Refresh this page</li>\n              </ol>\n              <button \n                className=\"btn btn-primary\"\n                onClick={() => window.location.reload()}\n                style={{ marginTop: '20px' }}\n              >\n                ðŸ”„ I've Disabled Ad Blocker - Refresh\n              </button>\n            </div>\n          )}\n          {platformInfo && (\n            <div className=\"access-blocked-debug\">\n              <small>Platform: {platformInfo.raw || platformInfo.platform}</small>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Check if user is suspended or banned\n  if (user && user.status && user.status !== 'active') {\n    // Build support Telegram link\n    const supportId = settings?.supportTelegramId || '';\n    const supportLink = supportId.startsWith('@') \n      ? `https://t.me/${supportId.slice(1)}` \n      : supportId.startsWith('https://') || supportId.startsWith('http://') \n        ? supportId \n        : supportId \n          ? `https://t.me/${supportId}` \n          : null;\n    \n    return (\n      <div className=\"blocked-screen\">\n        <div className=\"blocked-card\">\n          <div className=\"blocked-icon\">\n            {user.status === 'banned' ? 'ðŸš«' : 'âš ï¸'}\n          </div>\n          <h2>Account {user.status === 'banned' ? 'Banned' : 'Suspended'}</h2>\n          <p className=\"blocked-message\">\n            {user.status === 'banned' \n              ? 'Your account has been permanently banned due to policy violations.'\n              : 'Your account has been temporarily suspended.'}\n          </p>\n          <p className=\"blocked-sub\">\n            If you believe this is a mistake, please contact our support team.\n          </p>\n          {supportLink && (\n            <a \n              href={supportLink}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"btn btn-primary\"\n              style={{ marginTop: '20px', display: 'inline-block', textDecoration: 'none' }}\n            >\n              ðŸ’¬ Contact Support\n            </a>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    const tg = window.Telegram?.WebApp;\n    return (\n      <div className=\"welcome-screen\">\n        <div className=\"welcome-card\">\n          <div className=\"welcome-icon\">âš¡</div>\n          <h2>Welcome!</h2>\n          {error ? (\n            <>\n              <p className=\"error-text\">{error}</p>\n              <button \n                className=\"btn btn-primary\"\n                onClick={() => {\n                  setError(null);\n                  setInitializing(true);\n                  initTelegramAuth();\n                }}\n                style={{ marginTop: '15px' }}\n              >\n                Try Again\n              </button>\n              {/* Enhanced Debug Panel */}\n              <div style={{ marginTop: '20px', padding: '12px', background: '#1a1a2e', borderRadius: '8px', textAlign: 'left', fontSize: '11px', fontFamily: 'monospace', color: '#0f0', maxHeight: '150px', overflow: 'auto' }}>\n                <div style={{ color: '#ff0', marginBottom: '4px' }}>API: {axios.defaults.baseURL}</div>\n                <div style={{ color: '#ff0', marginBottom: '4px' }}>Platform: {tg?.platform || 'none'}</div>\n                <div style={{ color: '#ff0', marginBottom: '4px' }}>Has initData: {!!tg?.initData}</div>\n                <div style={{ color: '#ff0', marginBottom: '4px' }}>Token: {localStorage.getItem('token') ? 'Present' : 'Missing'}</div>\n                <div style={{ wordBreak: 'break-all' }}>{debugInfo}</div>\n              </div>\n            </>\n          ) : tg?.initData ? (\n            <p>Authenticating with Telegram...</p>\n          ) : (\n            <>\n              <p>Please open this app from Telegram to continue.</p>\n              <a \n                href=\"https://t.me/miniFaucet_bot\" \n                className=\"btn btn-primary\"\n                style={{ marginTop: '20px', display: 'inline-block', textDecoration: 'none' }}\n              >\n                Open in Telegram\n              </a>\n            </>\n          )}\n          {debugInfo && !error && (\n            <div className=\"welcome-debug\">\n              <small>{debugInfo}</small>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <Routes>\n        <Route path=\"/\" element={<ErrorBoundary><Dashboard /></ErrorBoundary>} />\n        <Route path=\"/earnings\" element={<ErrorBoundary><Earnings /></ErrorBoundary>} />\n        <Route path=\"/tasks\" element={<ErrorBoundary><Tasks /></ErrorBoundary>} />\n        <Route path=\"/ads\" element={<ErrorBoundary><Ads /></ErrorBoundary>} />\n        <Route path=\"/referrals\" element={<ErrorBoundary><Referrals /></ErrorBoundary>} />\n        <Route path=\"/withdrawals\" element={<ErrorBoundary><Withdrawals /></ErrorBoundary>} />\n        <Route path=\"/profile\" element={<ErrorBoundary><Profile /></ErrorBoundary>} />\n      </Routes>\n    </div>\n  );\n}\n\nfunction AdminApp() {\n  const { admin } = useAuth();\n\n  return (\n    <AdminThemeProvider>\n      <Routes>\n        <Route path=\"/login\" element={admin ? <Navigate to=\"/admin\" replace /> : <AdminLogin />} />\n        <Route path=\"/users/:id\" element={admin ? <UserDetails /> : <Navigate to=\"/admin/login\" replace />} />\n        <Route path=\"/*\" element={admin ? <AdminDashboard /> : <Navigate to=\"/admin/login\" replace />} />\n      </Routes>\n    </AdminThemeProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}