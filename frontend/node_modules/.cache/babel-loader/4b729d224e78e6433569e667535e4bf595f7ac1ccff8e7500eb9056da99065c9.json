{"ast":null,"code":"import _objectSpread from\"/workspaces/claimpto/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useRef}from'react';import axios from'axios';import Navbar from'../common/Navbar';import BottomNav from'../common/BottomNav';import SuccessPopup from'../common/SuccessPopup';import Turnstile,{useTurnstile}from'../common/Turnstile';import{useAuth,useSettings,useData}from'../../context/AuthContext';// Premium SVG Icons\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChartIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"20\",x2:\"18\",y2:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"20\",x2:\"12\",y2:\"4\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"20\",x2:\"6\",y2:\"14\"})]});const PlayCircleIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"10 8 16 12 10 16 10 8\"})]});const MonitorIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"2\",y:\"3\",width:\"20\",height:\"14\",rx:\"2\",ry:\"2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"8\",y1:\"21\",x2:\"16\",y2:\"21\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"17\",x2:\"12\",y2:\"21\"})]});const CoinIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12 6v12\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M15 9.5c0-1.38-1.34-2.5-3-2.5s-3 1.12-3 2.5 1.34 2.5 3 2.5 3 1.12 3 2.5-1.34 2.5-3 2.5\"})]});const VideoIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"2\",y:\"3\",width:\"20\",height:\"14\",rx:\"2\",ry:\"2\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"10,8 10,12 14,10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"8\",y1:\"21\",x2:\"16\",y2:\"21\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"17\",x2:\"12\",y2:\"21\"})]});const LightbulbIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"9\",y1:\"18\",x2:\"15\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"10\",y1:\"22\",x2:\"14\",y2:\"22\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14\"})]});const MailboxIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"72\",height:\"72\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M22 17H2a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2Z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M6 17V7\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M6 10h4\"})]});function Ads(){var _settings$turnstile,_settings$turnstile2,_settings$turnstile3;const{updateUser}=useAuth();const{settings}=useSettings();const{adProviders:cachedAdsInfo,fetchAdProviders}=useData();const[providers,setProviders]=useState((cachedAdsInfo===null||cachedAdsInfo===void 0?void 0:cachedAdsInfo.providers)||[]);const[peeringEnabled,setPeeringEnabled]=useState((cachedAdsInfo===null||cachedAdsInfo===void 0?void 0:cachedAdsInfo.peeringEnabled)||false);const[adsInfo,setAdsInfo]=useState(cachedAdsInfo);const[loading,setLoading]=useState(!cachedAdsInfo);const[watching,setWatching]=useState(null);const[cooldown,setCooldown]=useState((cachedAdsInfo===null||cachedAdsInfo===void 0?void 0:cachedAdsInfo.cooldownRemaining)||0);const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[successPopup,setSuccessPopup]=useState(null);// Peered session state\nconst[peeredSession,setPeeredSession]=useState(null);const[peeredProgress,setPeeredProgress]=useState({completed:0,total:0,remaining:[]});// Turnstile state\nconst turnstile=useTurnstile(settings===null||settings===void 0?void 0:(_settings$turnstile=settings.turnstile)===null||_settings$turnstile===void 0?void 0:_settings$turnstile.siteKey);const adExtraScriptLoaded=useRef(false);const adExtraPlacementId=useRef(null);const monetagScriptLoaded=useRef(false);const monetagZoneId=useRef(null);const adexoraScriptLoaded=useRef(false);const adexoraAppId=useRef(null);const adsgramScriptLoaded=useRef(false);const adsgramBlockId=useRef(null);const adsgramController=useRef(null);const currencyName=(settings===null||settings===void 0?void 0:settings.currencyName)||'Coins';const fetchAdsInfo=useCallback(async()=>{setError(null);try{// fetchAdProviders now returns the full adsInfo object\nconst data=await fetchAdProviders();if(data){setAdsInfo(data);setProviders(data.providers||[]);setPeeringEnabled(data.peeringEnabled||false);setCooldown(data.cooldownRemaining||0);}}catch(error){var _error$response,_error$response$data;console.error('Ads info error:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to load ads information. Please try again.');}finally{setLoading(false);}},[fetchAdProviders]);useEffect(()=>{// Use cached data immediately\nif(cachedAdsInfo){setAdsInfo(cachedAdsInfo);setProviders(cachedAdsInfo.providers||[]);setPeeringEnabled(cachedAdsInfo.peeringEnabled||false);setCooldown(cachedAdsInfo.cooldownRemaining||0);setLoading(false);}fetchAdsInfo();},[fetchAdsInfo,cachedAdsInfo]);// Cooldown timer\nuseEffect(()=>{if(cooldown>0){const timer=setInterval(()=>{setCooldown(prev=>Math.max(0,prev-1));},1000);return()=>clearInterval(timer);}},[cooldown]);const watchAd=async provider=>{if(cooldown>0||watching)return;setWatching(provider.id);setError(null);setSuccess(null);let sessionId=null;try{// Start ad session - include Turnstile token if available (backend will bypass for Telegram users)\nconst startResponse=await axios.post('/ads/start',{provider:provider.id,turnstileToken:turnstile.token||undefined});sessionId=startResponse.data.sessionId;const config=startResponse.data.config;// Show the ad - this will only resolve if user actually watched the ad\nawait showAd(provider.id,config);// Only complete session and give reward if ad was successfully watched\nconst completeResponse=await axios.post('/ads/complete',{sessionId,turnstileToken:turnstile.token||undefined});// Show success popup\nsetSuccessPopup({type:'ads',reward:completeResponse.data.reward,newBalance:completeResponse.data.newBalance});// Refresh user data\nconst userResponse=await axios.get('/user/dashboard');updateUser(userResponse.data.user);// Refresh ads info\nfetchAdsInfo();// Reset Turnstile for next ad (if token was used)\nif(turnstile.token){turnstile.reset();}}catch(error){var _error$response2,_error$response2$data,_error$response3,_error$response3$data,_error$response4,_error$response4$data;// Cancel the session if it was started but ad failed\nif(sessionId){try{await axios.post('/ads/cancel',{sessionId});}catch(cancelError){console.error('Failed to cancel ad session:',cancelError);}}// Show user-friendly error message\nconst message=error.message||((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to complete ad. No reward given.';setError(message);// Check if it's a Turnstile error\nif((_error$response3=error.response)!==null&&_error$response3!==void 0&&(_error$response3$data=_error$response3.data)!==null&&_error$response3$data!==void 0&&_error$response3$data.turnstileRequired){turnstile.reset();}if((_error$response4=error.response)!==null&&_error$response4!==void 0&&(_error$response4$data=_error$response4.data)!==null&&_error$response4$data!==void 0&&_error$response4$data.remainingSeconds){setCooldown(error.response.data.remainingSeconds);}}finally{setWatching(null);}};// Watch a peered provider - must complete all peered ads in sequence\nconst watchPeeredAds=async triggeredProvider=>{if(cooldown>0||watching||peeredSession)return;setWatching(\"peered_\".concat(triggeredProvider.id));setError(null);setSuccess(null);let peeredSessionId=null;try{// Start peered session - include Turnstile token if available (backend will bypass for Telegram users)\nconst startResponse=await axios.post('/ads/peered/start',{triggeredBy:triggeredProvider.id,turnstileToken:turnstile.token||undefined});peeredSessionId=startResponse.data.peeredSessionId;const providersToWatch=startResponse.data.providers;// Set up peered session state\nsetPeeredSession({id:peeredSessionId,combinedReward:startResponse.data.combinedReward,totalAds:providersToWatch.length});setPeeredProgress({completed:0,total:providersToWatch.length,remaining:providersToWatch.map(p=>p.id)});// Watch each ad in sequence\nfor(let i=0;i<providersToWatch.length;i++){const provider=providersToWatch[i];setWatching(provider.id);try{// Show the individual ad\nawait showAd(provider.id,provider.config);// Mark this ad as completed in the peered session\nconst completeResponse=await axios.post('/ads/peered/complete-ad',{peeredSessionId,providerId:provider.id});// Update progress\nsetPeeredProgress(prev=>({completed:completeResponse.data.completedAds,total:completeResponse.data.totalAds,remaining:completeResponse.data.remainingProviders||[]}));// Check if all completed\nif(completeResponse.data.completed){// All ads watched - show combined reward\nsetSuccessPopup({type:'peered',reward:completeResponse.data.reward,newBalance:completeResponse.data.balance,adsWatched:completeResponse.data.totalAds});// Refresh user data\nconst userResponse=await axios.get('/user/dashboard');updateUser(userResponse.data.user);// Refresh ads info\nfetchAdsInfo();// Clear peered session\nsetPeeredSession(null);setPeeredProgress({completed:0,total:0,remaining:[]});break;}}catch(adError){console.error(\"Failed to complete ad \".concat(provider.id,\":\"),adError);throw adError;// Re-throw to cancel entire peered session\n}}}catch(error){var _error$response5,_error$response5$data,_error$response6,_error$response6$data;// Cancel the peered session if any ad failed\nif(peeredSessionId){try{await axios.post('/ads/peered/cancel',{peeredSessionId});}catch(cancelError){console.error('Failed to cancel peered session:',cancelError);}}// Clear peered session state\nsetPeeredSession(null);setPeeredProgress({completed:0,total:0,remaining:[]});// Show user-friendly error message\nconst message=error.message||((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'Failed to complete peered ads. No reward given.';setError(message);if((_error$response6=error.response)!==null&&_error$response6!==void 0&&(_error$response6$data=_error$response6.data)!==null&&_error$response6$data!==void 0&&_error$response6$data.remainingSeconds){setCooldown(error.response.data.remainingSeconds);}}finally{setWatching(null);}};// Handle ad click - either single ad or peered ads\nconst handleAdClick=provider=>{if(cooldown>0||watching||adsInfo.remainingToday===0)return;if(provider.isPeered&&peeringEnabled){// Check if user has enough remaining ads for the peered group (same peerGroupIndex)\nconst peeredCount=providers.filter(p=>p.peerGroupIndex===provider.peerGroupIndex).length;if(adsInfo.remainingToday<peeredCount){setError(\"Need \".concat(peeredCount,\" ads remaining for peered ads (you have \").concat(adsInfo.remainingToday,\")\"));return;}watchPeeredAds(provider);}else{watchAd(provider);}};// Load Adsgram SDK dynamically - following official integration guide\nconst loadAdsgramScript=useCallback(blockId=>{return new Promise((resolve,reject)=>{// Check if already loaded with same block ID\nif(adsgramScriptLoaded.current&&adsgramBlockId.current===blockId&&adsgramController.current){console.log('Adsgram SDK already loaded for block:',blockId);resolve(adsgramController.current);return;}// Check if script is already in DOM\nconst existingScript=document.getElementById('adsgram-script');const initController=()=>{if(window.Adsgram){try{// Initialize AdController as per official guide\nconst AdController=window.Adsgram.init({blockId});adsgramScriptLoaded.current=true;adsgramBlockId.current=blockId;adsgramController.current=AdController;console.log('Adsgram SDK initialized for block:',blockId);resolve(AdController);}catch(err){console.error('Failed to initialize Adsgram:',err);reject(new Error('Failed to initialize Adsgram SDK'));}}else{reject(new Error('Adsgram SDK not available after loading'));}};if(existingScript&&window.Adsgram){// Script already loaded, just reinitialize if block ID changed\ninitController();return;}// Remove existing script if any\nif(existingScript){existingScript.remove();}// Create and load script as per official guide\nconst script=document.createElement('script');script.id='adsgram-script';script.src='https://sad.adsgram.ai/js/sad.min.js';script.async=true;script.onload=()=>{console.log('Adsgram script loaded successfully');// Small delay to ensure SDK is fully initialized\nsetTimeout(()=>initController(),100);};script.onerror=()=>{console.error('Failed to load Adsgram script');adsgramScriptLoaded.current=false;adsgramBlockId.current=null;adsgramController.current=null;reject(new Error('Failed to load Adsgram SDK'));};document.head.appendChild(script);});},[]);// Load Monetag SDK dynamically - following official integration guide\nconst loadMonetagScript=useCallback(zoneId=>{return new Promise((resolve,reject)=>{// Check if already loaded with same zone ID\nif(monetagScriptLoaded.current&&monetagZoneId.current===zoneId){console.log('Monetag script already loaded for zone:',zoneId);resolve();return;}// Remove existing script if zone ID changed\nconst existingScript=document.getElementById('monetag-script');if(existingScript){existingScript.remove();}// Create and load script in head as per Monetag guide\nconst script=document.createElement('script');script.id='monetag-script';script.src='//libtl.com/sdk.js';script.setAttribute('data-zone',zoneId);script.setAttribute('data-sdk',\"show_\".concat(zoneId));script.onload=()=>{console.log('Monetag script loaded successfully for zone:',zoneId);monetagScriptLoaded.current=true;monetagZoneId.current=zoneId;resolve();};script.onerror=()=>{console.error('Failed to load Monetag script for zone:',zoneId);monetagScriptLoaded.current=false;monetagZoneId.current=null;reject(new Error('Failed to load Monetag script'));};document.head.appendChild(script);});},[]);// Load Adexora SDK dynamically - following official documentation\nconst loadAdexoraScript=useCallback(appId=>{return new Promise((resolve,reject)=>{// Check if already loaded with same app ID\nif(adexoraScriptLoaded.current&&adexoraAppId.current===appId){console.log('Adexora script already loaded for app:',appId);resolve();return;}// Remove existing script if app ID changed\nconst existingScript=document.getElementById('adexora-script');if(existingScript){existingScript.remove();}// Create and load script in head as per Adexora docs\nconst script=document.createElement('script');script.id='adexora-script';script.src=\"https://adexora.com/cdn/ads.js?id=\".concat(appId);script.onload=()=>{console.log('Adexora script loaded successfully for app:',appId);adexoraScriptLoaded.current=true;adexoraAppId.current=appId;resolve();};script.onerror=()=>{console.error('Failed to load Adexora script for app:',appId);adexoraScriptLoaded.current=false;adexoraAppId.current=null;reject(new Error('Failed to load Adexora script'));};document.head.appendChild(script);});},[]);// Load AdExtra script dynamically - following official integration guide\nconst loadAdExtraScript=useCallback(placementId=>{return new Promise((resolve,reject)=>{// Check if already loaded with same placement ID\nif(adExtraScriptLoaded.current&&adExtraPlacementId.current===placementId){console.log('AdExtra script already loaded for placement:',placementId);resolve();return;}// Remove existing script if placement ID changed\nconst existingScript=document.getElementById('adextra-script');if(existingScript){existingScript.remove();}// Remove existing container if any\nconst existingContainer=document.getElementById(placementId);if(existingContainer){existingContainer.remove();}// Create container div in body as per guide (Step 2)\nconst container=document.createElement('div');container.id=placementId;document.body.appendChild(container);// Create and load script in head as per guide (Step 1)\nconst script=document.createElement('script');script.id='adextra-script';script.src=\"https://partner.adextra.io/jt/\".concat(placementId,\".js\");script.async=true;script.onload=()=>{console.log('AdExtra script loaded successfully for placement:',placementId);adExtraScriptLoaded.current=true;adExtraPlacementId.current=placementId;resolve();};script.onerror=()=>{console.error('Failed to load AdExtra script for placement:',placementId);adExtraScriptLoaded.current=false;adExtraPlacementId.current=null;reject(new Error('Failed to load AdExtra script'));};document.head.appendChild(script);});},[]);const showAd=async(providerId,config)=>{return new Promise((resolve,reject)=>{if(providerId==='adsgram'&&config.blockId){// Adsgram Rewarded Ads - following official integration guide\nloadAdsgramScript(config.blockId).then(AdController=>{console.log('Showing Adsgram Rewarded Ad...');// Show ad as per official guide\n// Promise resolves when user watches ad till the end\n// Promise rejects if user gets error during playing ad\nAdController.show().then(result=>{// User watched ad till the end\nconsole.log('Adsgram ad completed successfully:',result);resolve();}).catch(result=>{// User got error during playing ad or closed early\nconsole.error('Adsgram ad error or closed:',result);const errorMsg=(result===null||result===void 0?void 0:result.description)||'Ad was not completed';reject(new Error(\"\".concat(errorMsg,\". No reward given.\")));});}).catch(err=>{console.error('Failed to load Adsgram:',err);reject(new Error('Failed to load ad. Please refresh and try again.'));});}else if(providerId==='monetag'&&config.zoneId){// Monetag Rewarded Interstitial - following official documentation\nloadMonetagScript(config.zoneId).then(()=>{// Wait for script to fully initialize\nconst tryShowAd=function(){let attempts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;// The function name is show_{zoneId} as per Monetag docs\nconst showFunctionName=\"show_\".concat(config.zoneId);if(typeof window[showFunctionName]==='function'){console.log(\"Calling \".concat(showFunctionName,\" for Monetag Rewarded Interstitial...\"));try{// Using Rewarded Interstitial format as per documentation\n// Pass ymid for tracking (using sessionId if available)\nwindow[showFunctionName]().then(()=>{console.log('Monetag ad completed successfully - user watched the ad');resolve();// Only give reward on successful completion\n}).catch(err=>{console.error('Monetag ad failed or was skipped:',err);reject(new Error('Ad was not completed. No reward given.'));});}catch(err){console.error('Monetag show error:',err);reject(new Error('Failed to show ad. Please try again.'));}}else if(attempts<10){// Retry up to 10 times with 500ms delay\nconsole.log(\"Waiting for \".concat(showFunctionName,\" function... attempt \").concat(attempts+1));setTimeout(()=>tryShowAd(attempts+1),500);}else{console.error(\"\".concat(showFunctionName,\" function not available after 5 seconds\"));reject(new Error('Ad provider failed to initialize. Please try again.'));}};// Start trying to show ad after a brief delay for initialization\nsetTimeout(()=>tryShowAd(0),500);}).catch(err=>{console.error('Failed to load Monetag:',err);reject(new Error('Failed to load ad. Please check your connection and try again.'));});}else if(providerId==='adextra'&&config.placementId){// AdExtra integration - Full-Screen Format (Step 3 from guide)\nloadAdExtraScript(config.placementId).then(()=>{// Wait for script to fully initialize\nconst tryShowAd=function(){let attempts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(typeof window.p_adextra==='function'){console.log('Calling p_adextra with callbacks...');// Define callbacks as per AdExtra guide\nconst onSuccess=()=>{console.log('AdExtra ad completed successfully - user watched the ad');resolve();// Only give reward on successful completion\n};const onError=()=>{console.error('AdExtra ad error - ad was not watched');reject(new Error('Ad failed to display. No reward given.'));};try{// Call p_adextra with success and error callbacks (Step 3 from guide)\nwindow.p_adextra(onSuccess,onError);}catch(err){console.error('AdExtra show error:',err);reject(new Error('Failed to show ad. Please try again.'));}}else if(attempts<10){// Retry up to 10 times with 500ms delay\nconsole.log(\"Waiting for p_adextra function... attempt \".concat(attempts+1));setTimeout(()=>tryShowAd(attempts+1),500);}else{console.error('p_adextra function not available after 5 seconds');reject(new Error('Ad provider failed to initialize. Please try again.'));}};// Start trying to show ad after a brief delay for initialization\nsetTimeout(()=>tryShowAd(0),500);}).catch(err=>{console.error('Failed to load AdExtra:',err);reject(new Error('Failed to load ad. Please check your connection and try again.'));});}else if(providerId==='adexora'&&config.appId){// Adexora Rewarded Interstitial - following official documentation\nloadAdexoraScript(config.appId).then(()=>{// Wait for script to fully initialize\nconst tryShowAd=function(){let attempts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(typeof window.showAdexora==='function'){console.log('Calling showAdexora for Adexora Rewarded Interstitial...');try{// Using showAdexora() as per documentation\nwindow.showAdexora().then(()=>{console.log('Adexora ad completed successfully - user watched the ad');resolve();// Only give reward on successful completion\n}).catch(err=>{console.error('Adexora ad failed or was skipped:',err);reject(new Error('Ad was not completed. No reward given.'));});}catch(err){console.error('Adexora show error:',err);reject(new Error('Failed to show ad. Please try again.'));}}else if(attempts<10){// Retry up to 10 times with 500ms delay\nconsole.log(\"Waiting for showAdexora function... attempt \".concat(attempts+1));setTimeout(()=>tryShowAd(attempts+1),500);}else{console.error('showAdexora function not available after 5 seconds');reject(new Error('Ad provider failed to initialize. Please try again.'));}};// Start trying to show ad after a brief delay for initialization\nsetTimeout(()=>tryShowAd(0),500);}).catch(err=>{console.error('Failed to load Adexora:',err);reject(new Error('Failed to load ad. Please check your connection and try again.'));});}else{reject(new Error('Ad provider not configured properly.'));}});};const formatTime=seconds=>{const mins=Math.floor(seconds/60);const secs=seconds%60;return\"\".concat(mins,\":\").concat(secs.toString().padStart(2,'0'));};const getProviderIcon=providerId=>{const icons={adsgram:/*#__PURE__*/_jsx(MonitorIcon,{}),monetag:/*#__PURE__*/_jsx(CoinIcon,{}),adextra:/*#__PURE__*/_jsx(VideoIcon,{}),adexora:/*#__PURE__*/_jsx(PlayCircleIcon,{})};return icons[providerId]||/*#__PURE__*/_jsx(PlayCircleIcon,{});};if(loading){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container page-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading ads...\"})]})}),/*#__PURE__*/_jsx(BottomNav,{})]});}if(!(adsInfo!==null&&adsInfo!==void 0&&adsInfo.enabled)){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container page-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-state-icon\",children:/*#__PURE__*/_jsx(MonitorIcon,{})}),/*#__PURE__*/_jsx(\"h3\",{className:\"empty-state-title\",children:\"Ads Currently Unavailable\"}),/*#__PURE__*/_jsx(\"p\",{className:\"empty-state-description\",children:\"Ad rewards are temporarily disabled. Please check back later.\"})]})})}),/*#__PURE__*/_jsx(BottomNav,{})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container page-content\",children:[error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error\",style:{marginBottom:'16px'},children:[error,/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm\",onClick:()=>{setLoading(true);fetchAdsInfo();},style:{marginLeft:'10px'},children:\"Retry\"})]}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success\",children:success}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-icon\",children:/*#__PURE__*/_jsx(ChartIcon,{})}),\"Daily Progress\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"progress-label\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Ads Watched Today\"}),/*#__PURE__*/_jsxs(\"span\",{children:[adsInfo.adsWatchedToday,\" / \",adsInfo.dailyLimit]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(adsInfo.adsWatchedToday/adsInfo.dailyLimit*100,\"%\")}})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted\",style:{fontSize:'14px',marginTop:'8px'},children:[\"You can watch \",adsInfo.remainingToday,\" more ads today\"]})]}),cooldown>0&&/*#__PURE__*/_jsx(\"div\",{className:\"card card-gradient\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"timer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"timer-value\",children:formatTime(cooldown)}),/*#__PURE__*/_jsx(\"div\",{className:\"timer-label\",style:{color:'rgba(255,255,255,0.8)'},children:\"Next ad available in\"})]})}),watching&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",style:{textAlign:'center',padding:'40px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"ad-watching-icon\",children:/*#__PURE__*/_jsx(MonitorIcon,{})}),/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:'16px'},children:peeredSession?\"Watching Ads (\".concat(peeredProgress.completed+1,\"/\").concat(peeredProgress.total,\")\"):'Watching Ad...'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Please wait while the ad plays\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",style:{margin:'20px auto'}}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px',color:'var(--text-secondary)',marginTop:'12px'},children:\"Don't close this window\"})]})}),(settings===null||settings===void 0?void 0:(_settings$turnstile2=settings.turnstile)===null||_settings$turnstile2===void 0?void 0:_settings$turnstile2.enabled)&&(settings===null||settings===void 0?void 0:(_settings$turnstile3=settings.turnstile)===null||_settings$turnstile3===void 0?void 0:_settings$turnstile3.siteKey)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',opacity:0,pointerEvents:'none',height:0,overflow:'hidden'},children:/*#__PURE__*/_jsx(Turnstile,_objectSpread({},turnstile.turnstileProps))}),(turnstile.error||turnstile.needsInteraction)&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginBottom:'16px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-icon\",children:\"\\uD83D\\uDEE1\\uFE0F\"}),\"Security Verification Required\"]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",style:{fontSize:'14px',marginBottom:'12px'},children:\"Please complete the verification to continue.\"}),/*#__PURE__*/_jsx(Turnstile,{siteKey:settings.turnstile.siteKey,onVerify:turnstile.handleVerify,onExpire:turnstile.handleExpire,onError:turnstile.handleError,appearance:\"always\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-icon\",children:/*#__PURE__*/_jsx(PlayCircleIcon,{})}),\"Watch Ads to Earn\"]})}),providers.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-state-icon\",children:/*#__PURE__*/_jsx(MailboxIcon,{})}),/*#__PURE__*/_jsx(\"h3\",{className:\"empty-state-title\",children:\"No Ads Available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"empty-state-description\",children:\"There are no ad providers available at the moment.\"})]}):providers.map(provider=>{const isDisabled=cooldown>0||watching||adsInfo.remainingToday===0;const isPeered=provider.isPeered&&peeringEnabled;// Count providers in the same peer group\nconst peeredCount=isPeered?providers.filter(p=>p.peerGroupIndex===provider.peerGroupIndex).length:0;const notEnoughForPeered=isPeered&&adsInfo.remainingToday<peeredCount;return/*#__PURE__*/_jsxs(\"div\",{className:\"ad-provider-card \".concat(isDisabled||notEnoughForPeered?'disabled':''),onClick:()=>!(isDisabled||notEnoughForPeered)&&handleAdClick(provider),style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ad-provider-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ad-provider-name\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ad-provider-icon\",children:getProviderIcon(provider.id)}),provider.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ad-provider-reward\",children:[\"+\",provider.reward,\" \",currencyName]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"ad-provider-description\",children:isPeered?\"Watch with \".concat(peeredCount-1,\" other ad\").concat(peeredCount>2?'s':'',\" in sequence\"):'Watch a short video ad to earn rewards instantly!'}),isPeered&&/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',bottom:'10px',right:'12px',fontSize:'9px',padding:'3px 8px',background:'linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.15))',color:'var(--primary-color)',borderRadius:'4px',fontWeight:'600',letterSpacing:'0.5px',border:'1px solid rgba(99, 102, 241, 0.2)'},children:\"\\uD83D\\uDD17 PEERED\"}),notEnoughForPeered&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'12px',color:'#ef4444',margin:'8px 0 0 0'},children:[\"Need \",peeredCount,\" ads remaining (you have \",adsInfo.remainingToday,\")\"]}),watching===provider.id&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'12px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",style:{width:'24px',height:'24px',margin:'0 auto'}})})]},provider.id);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-icon tips-icon\",children:/*#__PURE__*/_jsx(LightbulbIcon,{})}),\"Tips\"]})}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'var(--text-secondary)'},children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'8px'},children:\"\\u2022 Watch ads regularly to maximize your earnings\"}),/*#__PURE__*/_jsxs(\"p\",{style:{marginBottom:'8px'},children:[\"\\u2022 Each ad has a \",adsInfo.cooldown,\" second cooldown\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginBottom:'8px'},children:[\"\\u2022 You can watch up to \",adsInfo.dailyLimit,\" ads per day\"]}),peeringEnabled&&providers.some(p=>p.isPeered)&&/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'8px'},children:\"\\u2022 Ads marked \\\"PEERED\\\" must be watched together in sequence\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 Rewards are credited instantly after watching\"})]})]})]}),/*#__PURE__*/_jsx(BottomNav,{}),/*#__PURE__*/_jsx(SuccessPopup,{show:!!successPopup,onClose:()=>setSuccessPopup(null),type:(successPopup===null||successPopup===void 0?void 0:successPopup.type)||'ads',reward:successPopup===null||successPopup===void 0?void 0:successPopup.reward,currencyName:currencyName,newBalance:successPopup===null||successPopup===void 0?void 0:successPopup.newBalance})]});}export default Ads;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","axios","Navbar","BottomNav","SuccessPopup","Turnstile","useTurnstile","useAuth","useSettings","useData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChartIcon","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","children","x1","y1","x2","y2","PlayCircleIcon","cx","cy","r","points","MonitorIcon","x","y","rx","ry","CoinIcon","d","VideoIcon","LightbulbIcon","MailboxIcon","Ads","_settings$turnstile","_settings$turnstile2","_settings$turnstile3","updateUser","settings","adProviders","cachedAdsInfo","fetchAdProviders","providers","setProviders","peeringEnabled","setPeeringEnabled","adsInfo","setAdsInfo","loading","setLoading","watching","setWatching","cooldown","setCooldown","cooldownRemaining","error","setError","success","setSuccess","successPopup","setSuccessPopup","peeredSession","setPeeredSession","peeredProgress","setPeeredProgress","completed","total","remaining","turnstile","siteKey","adExtraScriptLoaded","adExtraPlacementId","monetagScriptLoaded","monetagZoneId","adexoraScriptLoaded","adexoraAppId","adsgramScriptLoaded","adsgramBlockId","adsgramController","currencyName","fetchAdsInfo","data","_error$response","_error$response$data","console","response","message","timer","setInterval","prev","Math","max","clearInterval","watchAd","provider","id","sessionId","startResponse","post","turnstileToken","token","undefined","config","showAd","completeResponse","type","reward","newBalance","userResponse","get","user","reset","_error$response2","_error$response2$data","_error$response3","_error$response3$data","_error$response4","_error$response4$data","cancelError","turnstileRequired","remainingSeconds","watchPeeredAds","triggeredProvider","concat","peeredSessionId","triggeredBy","providersToWatch","combinedReward","totalAds","length","map","p","i","providerId","completedAds","remainingProviders","balance","adsWatched","adError","_error$response5","_error$response5$data","_error$response6","_error$response6$data","handleAdClick","remainingToday","isPeered","peeredCount","filter","peerGroupIndex","loadAdsgramScript","blockId","Promise","resolve","reject","current","log","existingScript","document","getElementById","initController","window","Adsgram","AdController","init","err","Error","remove","script","createElement","src","async","onload","setTimeout","onerror","head","appendChild","loadMonetagScript","zoneId","setAttribute","loadAdexoraScript","appId","loadAdExtraScript","placementId","existingContainer","container","body","then","show","result","catch","errorMsg","description","tryShowAd","attempts","arguments","showFunctionName","p_adextra","onSuccess","onError","showAdexora","formatTime","seconds","mins","floor","secs","toString","padStart","getProviderIcon","icons","adsgram","monetag","adextra","adexora","className","enabled","style","marginBottom","onClick","marginLeft","adsWatchedToday","dailyLimit","fontSize","marginTop","color","textAlign","padding","margin","position","opacity","pointerEvents","overflow","_objectSpread","turnstileProps","needsInteraction","onVerify","handleVerify","onExpire","handleExpire","handleError","appearance","isDisabled","notEnoughForPeered","name","bottom","right","background","borderRadius","fontWeight","letterSpacing","border","some","onClose"],"sources":["/workspaces/claimpto/frontend/src/components/user/Ads.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport axios from 'axios';\nimport Navbar from '../common/Navbar';\nimport BottomNav from '../common/BottomNav';\nimport SuccessPopup from '../common/SuccessPopup';\nimport Turnstile, { useTurnstile } from '../common/Turnstile';\nimport { useAuth, useSettings, useData } from '../../context/AuthContext';\n\n// Premium SVG Icons\nconst ChartIcon = () => (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <line x1=\"18\" y1=\"20\" x2=\"18\" y2=\"10\"/>\n    <line x1=\"12\" y1=\"20\" x2=\"12\" y2=\"4\"/>\n    <line x1=\"6\" y1=\"20\" x2=\"6\" y2=\"14\"/>\n  </svg>\n);\n\nconst PlayCircleIcon = () => (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <circle cx=\"12\" cy=\"12\" r=\"10\"/>\n    <polygon points=\"10 8 16 12 10 16 10 8\"/>\n  </svg>\n);\n\nconst MonitorIcon = () => (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\n    <line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\"/>\n    <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\"/>\n  </svg>\n);\n\nconst CoinIcon = () => (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <circle cx=\"12\" cy=\"12\" r=\"10\"/>\n    <path d=\"M12 6v12\"/>\n    <path d=\"M15 9.5c0-1.38-1.34-2.5-3-2.5s-3 1.12-3 2.5 1.34 2.5 3 2.5 3 1.12 3 2.5-1.34 2.5-3 2.5\"/>\n  </svg>\n);\n\nconst VideoIcon = () => (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\n    <polygon points=\"10,8 10,12 14,10\"/>\n    <line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\"/>\n    <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\"/>\n  </svg>\n);\n\nconst LightbulbIcon = () => (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <line x1=\"9\" y1=\"18\" x2=\"15\" y2=\"18\"/>\n    <line x1=\"10\" y1=\"22\" x2=\"14\" y2=\"22\"/>\n    <path d=\"M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14\"/>\n  </svg>\n);\n\nconst MailboxIcon = () => (\n  <svg width=\"72\" height=\"72\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M22 17H2a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2Z\"/>\n    <path d=\"M6 17V7\"/>\n    <path d=\"M6 10h4\"/>\n  </svg>\n);\n\nfunction Ads() {\n  const { updateUser } = useAuth();\n  const { settings } = useSettings();\n  const { adProviders: cachedAdsInfo, fetchAdProviders } = useData();\n  const [providers, setProviders] = useState(cachedAdsInfo?.providers || []);\n  const [peeringEnabled, setPeeringEnabled] = useState(cachedAdsInfo?.peeringEnabled || false);\n  const [adsInfo, setAdsInfo] = useState(cachedAdsInfo);\n  const [loading, setLoading] = useState(!cachedAdsInfo);\n  const [watching, setWatching] = useState(null);\n  const [cooldown, setCooldown] = useState(cachedAdsInfo?.cooldownRemaining || 0);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [successPopup, setSuccessPopup] = useState(null);\n  // Peered session state\n  const [peeredSession, setPeeredSession] = useState(null);\n  const [peeredProgress, setPeeredProgress] = useState({ completed: 0, total: 0, remaining: [] });\n  // Turnstile state\n  const turnstile = useTurnstile(settings?.turnstile?.siteKey);\n  const adExtraScriptLoaded = useRef(false);\n  const adExtraPlacementId = useRef(null);\n  const monetagScriptLoaded = useRef(false);\n  const monetagZoneId = useRef(null);\n  const adexoraScriptLoaded = useRef(false);\n  const adexoraAppId = useRef(null);\n  const adsgramScriptLoaded = useRef(false);\n  const adsgramBlockId = useRef(null);\n  const adsgramController = useRef(null);\n\n  const currencyName = settings?.currencyName || 'Coins';\n\n  const fetchAdsInfo = useCallback(async () => {\n    setError(null);\n    try {\n      // fetchAdProviders now returns the full adsInfo object\n      const data = await fetchAdProviders();\n      if (data) {\n        setAdsInfo(data);\n        setProviders(data.providers || []);\n        setPeeringEnabled(data.peeringEnabled || false);\n        setCooldown(data.cooldownRemaining || 0);\n      }\n    } catch (error) {\n      console.error('Ads info error:', error);\n      setError(error.response?.data?.message || 'Failed to load ads information. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  }, [fetchAdProviders]);\n\n  useEffect(() => {\n    // Use cached data immediately\n    if (cachedAdsInfo) {\n      setAdsInfo(cachedAdsInfo);\n      setProviders(cachedAdsInfo.providers || []);\n      setPeeringEnabled(cachedAdsInfo.peeringEnabled || false);\n      setCooldown(cachedAdsInfo.cooldownRemaining || 0);\n      setLoading(false);\n    }\n    fetchAdsInfo();\n  }, [fetchAdsInfo, cachedAdsInfo]);\n\n  // Cooldown timer\n  useEffect(() => {\n    if (cooldown > 0) {\n      const timer = setInterval(() => {\n        setCooldown(prev => Math.max(0, prev - 1));\n      }, 1000);\n      return () => clearInterval(timer);\n    }\n  }, [cooldown]);\n\n  const watchAd = async (provider) => {\n    if (cooldown > 0 || watching) return;\n    \n    setWatching(provider.id);\n    setError(null);\n    setSuccess(null);\n\n    let sessionId = null;\n\n    try {\n      // Start ad session - include Turnstile token if available (backend will bypass for Telegram users)\n      const startResponse = await axios.post('/ads/start', { \n        provider: provider.id,\n        turnstileToken: turnstile.token || undefined\n      });\n      sessionId = startResponse.data.sessionId;\n      const config = startResponse.data.config;\n\n      // Show the ad - this will only resolve if user actually watched the ad\n      await showAd(provider.id, config);\n\n      // Only complete session and give reward if ad was successfully watched\n      const completeResponse = await axios.post('/ads/complete', { \n        sessionId,\n        turnstileToken: turnstile.token || undefined\n      });\n      \n      // Show success popup\n      setSuccessPopup({\n        type: 'ads',\n        reward: completeResponse.data.reward,\n        newBalance: completeResponse.data.newBalance\n      });\n      \n      // Refresh user data\n      const userResponse = await axios.get('/user/dashboard');\n      updateUser(userResponse.data.user);\n      \n      // Refresh ads info\n      fetchAdsInfo();\n      \n      // Reset Turnstile for next ad (if token was used)\n      if (turnstile.token) {\n        turnstile.reset();\n      }\n    } catch (error) {\n      // Cancel the session if it was started but ad failed\n      if (sessionId) {\n        try {\n          await axios.post('/ads/cancel', { sessionId });\n        } catch (cancelError) {\n          console.error('Failed to cancel ad session:', cancelError);\n        }\n      }\n      \n      // Show user-friendly error message\n      const message = error.message || error.response?.data?.message || 'Failed to complete ad. No reward given.';\n      setError(message);\n      \n      // Check if it's a Turnstile error\n      if (error.response?.data?.turnstileRequired) {\n        turnstile.reset();\n      }\n      \n      if (error.response?.data?.remainingSeconds) {\n        setCooldown(error.response.data.remainingSeconds);\n      }\n    } finally {\n      setWatching(null);\n    }\n  };\n\n  // Watch a peered provider - must complete all peered ads in sequence\n  const watchPeeredAds = async (triggeredProvider) => {\n    if (cooldown > 0 || watching || peeredSession) return;\n    \n    setWatching(`peered_${triggeredProvider.id}`);\n    setError(null);\n    setSuccess(null);\n\n    let peeredSessionId = null;\n\n    try {\n      // Start peered session - include Turnstile token if available (backend will bypass for Telegram users)\n      const startResponse = await axios.post('/ads/peered/start', { \n        triggeredBy: triggeredProvider.id,\n        turnstileToken: turnstile.token || undefined\n      });\n      peeredSessionId = startResponse.data.peeredSessionId;\n      const providersToWatch = startResponse.data.providers;\n      \n      // Set up peered session state\n      setPeeredSession({\n        id: peeredSessionId,\n        combinedReward: startResponse.data.combinedReward,\n        totalAds: providersToWatch.length\n      });\n      setPeeredProgress({\n        completed: 0,\n        total: providersToWatch.length,\n        remaining: providersToWatch.map(p => p.id)\n      });\n      \n      // Watch each ad in sequence\n      for (let i = 0; i < providersToWatch.length; i++) {\n        const provider = providersToWatch[i];\n        \n        setWatching(provider.id);\n        \n        try {\n          // Show the individual ad\n          await showAd(provider.id, provider.config);\n          \n          // Mark this ad as completed in the peered session\n          const completeResponse = await axios.post('/ads/peered/complete-ad', {\n            peeredSessionId,\n            providerId: provider.id\n          });\n          \n          // Update progress\n          setPeeredProgress(prev => ({\n            completed: completeResponse.data.completedAds,\n            total: completeResponse.data.totalAds,\n            remaining: completeResponse.data.remainingProviders || []\n          }));\n          \n          // Check if all completed\n          if (completeResponse.data.completed) {\n            // All ads watched - show combined reward\n            setSuccessPopup({\n              type: 'peered',\n              reward: completeResponse.data.reward,\n              newBalance: completeResponse.data.balance,\n              adsWatched: completeResponse.data.totalAds\n            });\n            \n            // Refresh user data\n            const userResponse = await axios.get('/user/dashboard');\n            updateUser(userResponse.data.user);\n            \n            // Refresh ads info\n            fetchAdsInfo();\n            \n            // Clear peered session\n            setPeeredSession(null);\n            setPeeredProgress({ completed: 0, total: 0, remaining: [] });\n            break;\n          }\n        } catch (adError) {\n          console.error(`Failed to complete ad ${provider.id}:`, adError);\n          throw adError; // Re-throw to cancel entire peered session\n        }\n      }\n    } catch (error) {\n      // Cancel the peered session if any ad failed\n      if (peeredSessionId) {\n        try {\n          await axios.post('/ads/peered/cancel', { peeredSessionId });\n        } catch (cancelError) {\n          console.error('Failed to cancel peered session:', cancelError);\n        }\n      }\n      \n      // Clear peered session state\n      setPeeredSession(null);\n      setPeeredProgress({ completed: 0, total: 0, remaining: [] });\n      \n      // Show user-friendly error message\n      const message = error.message || error.response?.data?.message || 'Failed to complete peered ads. No reward given.';\n      setError(message);\n      \n      if (error.response?.data?.remainingSeconds) {\n        setCooldown(error.response.data.remainingSeconds);\n      }\n    } finally {\n      setWatching(null);\n    }\n  };\n\n  // Handle ad click - either single ad or peered ads\n  const handleAdClick = (provider) => {\n    if (cooldown > 0 || watching || adsInfo.remainingToday === 0) return;\n    \n    if (provider.isPeered && peeringEnabled) {\n      // Check if user has enough remaining ads for the peered group (same peerGroupIndex)\n      const peeredCount = providers.filter(p => p.peerGroupIndex === provider.peerGroupIndex).length;\n      if (adsInfo.remainingToday < peeredCount) {\n        setError(`Need ${peeredCount} ads remaining for peered ads (you have ${adsInfo.remainingToday})`);\n        return;\n      }\n      watchPeeredAds(provider);\n    } else {\n      watchAd(provider);\n    }\n  };\n\n  // Load Adsgram SDK dynamically - following official integration guide\n  const loadAdsgramScript = useCallback((blockId) => {\n    return new Promise((resolve, reject) => {\n      // Check if already loaded with same block ID\n      if (adsgramScriptLoaded.current && adsgramBlockId.current === blockId && adsgramController.current) {\n        console.log('Adsgram SDK already loaded for block:', blockId);\n        resolve(adsgramController.current);\n        return;\n      }\n\n      // Check if script is already in DOM\n      const existingScript = document.getElementById('adsgram-script');\n      \n      const initController = () => {\n        if (window.Adsgram) {\n          try {\n            // Initialize AdController as per official guide\n            const AdController = window.Adsgram.init({ blockId });\n            adsgramScriptLoaded.current = true;\n            adsgramBlockId.current = blockId;\n            adsgramController.current = AdController;\n            console.log('Adsgram SDK initialized for block:', blockId);\n            resolve(AdController);\n          } catch (err) {\n            console.error('Failed to initialize Adsgram:', err);\n            reject(new Error('Failed to initialize Adsgram SDK'));\n          }\n        } else {\n          reject(new Error('Adsgram SDK not available after loading'));\n        }\n      };\n\n      if (existingScript && window.Adsgram) {\n        // Script already loaded, just reinitialize if block ID changed\n        initController();\n        return;\n      }\n\n      // Remove existing script if any\n      if (existingScript) {\n        existingScript.remove();\n      }\n\n      // Create and load script as per official guide\n      const script = document.createElement('script');\n      script.id = 'adsgram-script';\n      script.src = 'https://sad.adsgram.ai/js/sad.min.js';\n      script.async = true;\n      \n      script.onload = () => {\n        console.log('Adsgram script loaded successfully');\n        // Small delay to ensure SDK is fully initialized\n        setTimeout(() => initController(), 100);\n      };\n      \n      script.onerror = () => {\n        console.error('Failed to load Adsgram script');\n        adsgramScriptLoaded.current = false;\n        adsgramBlockId.current = null;\n        adsgramController.current = null;\n        reject(new Error('Failed to load Adsgram SDK'));\n      };\n      \n      document.head.appendChild(script);\n    });\n  }, []);\n\n  // Load Monetag SDK dynamically - following official integration guide\n  const loadMonetagScript = useCallback((zoneId) => {\n    return new Promise((resolve, reject) => {\n      // Check if already loaded with same zone ID\n      if (monetagScriptLoaded.current && monetagZoneId.current === zoneId) {\n        console.log('Monetag script already loaded for zone:', zoneId);\n        resolve();\n        return;\n      }\n\n      // Remove existing script if zone ID changed\n      const existingScript = document.getElementById('monetag-script');\n      if (existingScript) {\n        existingScript.remove();\n      }\n\n      // Create and load script in head as per Monetag guide\n      const script = document.createElement('script');\n      script.id = 'monetag-script';\n      script.src = '//libtl.com/sdk.js';\n      script.setAttribute('data-zone', zoneId);\n      script.setAttribute('data-sdk', `show_${zoneId}`);\n      \n      script.onload = () => {\n        console.log('Monetag script loaded successfully for zone:', zoneId);\n        monetagScriptLoaded.current = true;\n        monetagZoneId.current = zoneId;\n        resolve();\n      };\n      \n      script.onerror = () => {\n        console.error('Failed to load Monetag script for zone:', zoneId);\n        monetagScriptLoaded.current = false;\n        monetagZoneId.current = null;\n        reject(new Error('Failed to load Monetag script'));\n      };\n      \n      document.head.appendChild(script);\n    });\n  }, []);\n\n  // Load Adexora SDK dynamically - following official documentation\n  const loadAdexoraScript = useCallback((appId) => {\n    return new Promise((resolve, reject) => {\n      // Check if already loaded with same app ID\n      if (adexoraScriptLoaded.current && adexoraAppId.current === appId) {\n        console.log('Adexora script already loaded for app:', appId);\n        resolve();\n        return;\n      }\n\n      // Remove existing script if app ID changed\n      const existingScript = document.getElementById('adexora-script');\n      if (existingScript) {\n        existingScript.remove();\n      }\n\n      // Create and load script in head as per Adexora docs\n      const script = document.createElement('script');\n      script.id = 'adexora-script';\n      script.src = `https://adexora.com/cdn/ads.js?id=${appId}`;\n      \n      script.onload = () => {\n        console.log('Adexora script loaded successfully for app:', appId);\n        adexoraScriptLoaded.current = true;\n        adexoraAppId.current = appId;\n        resolve();\n      };\n      \n      script.onerror = () => {\n        console.error('Failed to load Adexora script for app:', appId);\n        adexoraScriptLoaded.current = false;\n        adexoraAppId.current = null;\n        reject(new Error('Failed to load Adexora script'));\n      };\n      \n      document.head.appendChild(script);\n    });\n  }, []);\n\n  // Load AdExtra script dynamically - following official integration guide\n  const loadAdExtraScript = useCallback((placementId) => {\n    return new Promise((resolve, reject) => {\n      // Check if already loaded with same placement ID\n      if (adExtraScriptLoaded.current && adExtraPlacementId.current === placementId) {\n        console.log('AdExtra script already loaded for placement:', placementId);\n        resolve();\n        return;\n      }\n\n      // Remove existing script if placement ID changed\n      const existingScript = document.getElementById('adextra-script');\n      if (existingScript) {\n        existingScript.remove();\n      }\n\n      // Remove existing container if any\n      const existingContainer = document.getElementById(placementId);\n      if (existingContainer) {\n        existingContainer.remove();\n      }\n\n      // Create container div in body as per guide (Step 2)\n      const container = document.createElement('div');\n      container.id = placementId;\n      document.body.appendChild(container);\n\n      // Create and load script in head as per guide (Step 1)\n      const script = document.createElement('script');\n      script.id = 'adextra-script';\n      script.src = `https://partner.adextra.io/jt/${placementId}.js`;\n      script.async = true;\n      \n      script.onload = () => {\n        console.log('AdExtra script loaded successfully for placement:', placementId);\n        adExtraScriptLoaded.current = true;\n        adExtraPlacementId.current = placementId;\n        resolve();\n      };\n      \n      script.onerror = () => {\n        console.error('Failed to load AdExtra script for placement:', placementId);\n        adExtraScriptLoaded.current = false;\n        adExtraPlacementId.current = null;\n        reject(new Error('Failed to load AdExtra script'));\n      };\n      \n      document.head.appendChild(script);\n    });\n  }, []);\n\n  const showAd = async (providerId, config) => {\n    return new Promise((resolve, reject) => {\n      if (providerId === 'adsgram' && config.blockId) {\n        // Adsgram Rewarded Ads - following official integration guide\n        loadAdsgramScript(config.blockId)\n          .then((AdController) => {\n            console.log('Showing Adsgram Rewarded Ad...');\n            \n            // Show ad as per official guide\n            // Promise resolves when user watches ad till the end\n            // Promise rejects if user gets error during playing ad\n            AdController.show()\n              .then((result) => {\n                // User watched ad till the end\n                console.log('Adsgram ad completed successfully:', result);\n                resolve();\n              })\n              .catch((result) => {\n                // User got error during playing ad or closed early\n                console.error('Adsgram ad error or closed:', result);\n                const errorMsg = result?.description || 'Ad was not completed';\n                reject(new Error(`${errorMsg}. No reward given.`));\n              });\n          })\n          .catch((err) => {\n            console.error('Failed to load Adsgram:', err);\n            reject(new Error('Failed to load ad. Please refresh and try again.'));\n          });\n      } else if (providerId === 'monetag' && config.zoneId) {\n        // Monetag Rewarded Interstitial - following official documentation\n        loadMonetagScript(config.zoneId)\n          .then(() => {\n            // Wait for script to fully initialize\n            const tryShowAd = (attempts = 0) => {\n              // The function name is show_{zoneId} as per Monetag docs\n              const showFunctionName = `show_${config.zoneId}`;\n              \n              if (typeof window[showFunctionName] === 'function') {\n                console.log(`Calling ${showFunctionName} for Monetag Rewarded Interstitial...`);\n                \n                try {\n                  // Using Rewarded Interstitial format as per documentation\n                  // Pass ymid for tracking (using sessionId if available)\n                  window[showFunctionName]()\n                    .then(() => {\n                      console.log('Monetag ad completed successfully - user watched the ad');\n                      resolve(); // Only give reward on successful completion\n                    })\n                    .catch((err) => {\n                      console.error('Monetag ad failed or was skipped:', err);\n                      reject(new Error('Ad was not completed. No reward given.'));\n                    });\n                } catch (err) {\n                  console.error('Monetag show error:', err);\n                  reject(new Error('Failed to show ad. Please try again.'));\n                }\n              } else if (attempts < 10) {\n                // Retry up to 10 times with 500ms delay\n                console.log(`Waiting for ${showFunctionName} function... attempt ${attempts + 1}`);\n                setTimeout(() => tryShowAd(attempts + 1), 500);\n              } else {\n                console.error(`${showFunctionName} function not available after 5 seconds`);\n                reject(new Error('Ad provider failed to initialize. Please try again.'));\n              }\n            };\n            \n            // Start trying to show ad after a brief delay for initialization\n            setTimeout(() => tryShowAd(0), 500);\n          })\n          .catch((err) => {\n            console.error('Failed to load Monetag:', err);\n            reject(new Error('Failed to load ad. Please check your connection and try again.'));\n          });\n      } else if (providerId === 'adextra' && config.placementId) {\n        // AdExtra integration - Full-Screen Format (Step 3 from guide)\n        loadAdExtraScript(config.placementId)\n          .then(() => {\n            // Wait for script to fully initialize\n            const tryShowAd = (attempts = 0) => {\n              if (typeof window.p_adextra === 'function') {\n                console.log('Calling p_adextra with callbacks...');\n                \n                // Define callbacks as per AdExtra guide\n                const onSuccess = () => {\n                  console.log('AdExtra ad completed successfully - user watched the ad');\n                  resolve(); // Only give reward on successful completion\n                };\n                \n                const onError = () => {\n                  console.error('AdExtra ad error - ad was not watched');\n                  reject(new Error('Ad failed to display. No reward given.'));\n                };\n                \n                try {\n                  // Call p_adextra with success and error callbacks (Step 3 from guide)\n                  window.p_adextra(onSuccess, onError);\n                } catch (err) {\n                  console.error('AdExtra show error:', err);\n                  reject(new Error('Failed to show ad. Please try again.'));\n                }\n              } else if (attempts < 10) {\n                // Retry up to 10 times with 500ms delay\n                console.log(`Waiting for p_adextra function... attempt ${attempts + 1}`);\n                setTimeout(() => tryShowAd(attempts + 1), 500);\n              } else {\n                console.error('p_adextra function not available after 5 seconds');\n                reject(new Error('Ad provider failed to initialize. Please try again.'));\n              }\n            };\n            \n            // Start trying to show ad after a brief delay for initialization\n            setTimeout(() => tryShowAd(0), 500);\n          })\n          .catch((err) => {\n            console.error('Failed to load AdExtra:', err);\n            reject(new Error('Failed to load ad. Please check your connection and try again.'));\n          });\n      } else if (providerId === 'adexora' && config.appId) {\n        // Adexora Rewarded Interstitial - following official documentation\n        loadAdexoraScript(config.appId)\n          .then(() => {\n            // Wait for script to fully initialize\n            const tryShowAd = (attempts = 0) => {\n              if (typeof window.showAdexora === 'function') {\n                console.log('Calling showAdexora for Adexora Rewarded Interstitial...');\n                \n                try {\n                  // Using showAdexora() as per documentation\n                  window.showAdexora()\n                    .then(() => {\n                      console.log('Adexora ad completed successfully - user watched the ad');\n                      resolve(); // Only give reward on successful completion\n                    })\n                    .catch((err) => {\n                      console.error('Adexora ad failed or was skipped:', err);\n                      reject(new Error('Ad was not completed. No reward given.'));\n                    });\n                } catch (err) {\n                  console.error('Adexora show error:', err);\n                  reject(new Error('Failed to show ad. Please try again.'));\n                }\n              } else if (attempts < 10) {\n                // Retry up to 10 times with 500ms delay\n                console.log(`Waiting for showAdexora function... attempt ${attempts + 1}`);\n                setTimeout(() => tryShowAd(attempts + 1), 500);\n              } else {\n                console.error('showAdexora function not available after 5 seconds');\n                reject(new Error('Ad provider failed to initialize. Please try again.'));\n              }\n            };\n            \n            // Start trying to show ad after a brief delay for initialization\n            setTimeout(() => tryShowAd(0), 500);\n          })\n          .catch((err) => {\n            console.error('Failed to load Adexora:', err);\n            reject(new Error('Failed to load ad. Please check your connection and try again.'));\n          });\n      } else {\n        reject(new Error('Ad provider not configured properly.'));\n      }\n    });\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const getProviderIcon = (providerId) => {\n    const icons = {\n      adsgram: <MonitorIcon />,\n      monetag: <CoinIcon />,\n      adextra: <VideoIcon />,\n      adexora: <PlayCircleIcon />\n    };\n    return icons[providerId] || <PlayCircleIcon />;\n  };\n\n  if (loading) {\n    return (\n      <>\n        <Navbar />\n        <div className=\"container page-content\">\n          <div className=\"loading\">\n            <div className=\"loading-spinner\"></div>\n            <p>Loading ads...</p>\n          </div>\n        </div>\n        <BottomNav />\n      </>\n    );\n  }\n\n  if (!adsInfo?.enabled) {\n    return (\n      <>\n        <Navbar />\n        <div className=\"container page-content\">\n          <div className=\"card\">\n            <div className=\"empty-state\">\n              <div className=\"empty-state-icon\"><MonitorIcon /></div>\n              <h3 className=\"empty-state-title\">Ads Currently Unavailable</h3>\n              <p className=\"empty-state-description\">\n                Ad rewards are temporarily disabled. Please check back later.\n              </p>\n            </div>\n          </div>\n        </div>\n        <BottomNav />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"container page-content\">\n        {error && (\n          <div className=\"error\" style={{ marginBottom: '16px' }}>\n            {error}\n            <button \n              className=\"btn btn-sm\"\n              onClick={() => { setLoading(true); fetchAdsInfo(); }}\n              style={{ marginLeft: '10px' }}\n            >\n              Retry\n            </button>\n          </div>\n        )}\n        {success && <div className=\"success\">{success}</div>}\n\n        {/* Daily Progress */}\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h2 className=\"card-title\">\n              <span className=\"card-icon\"><ChartIcon /></span>\n              Daily Progress\n            </h2>\n          </div>\n          <div className=\"progress-container\">\n            <div className=\"progress-label\">\n              <span>Ads Watched Today</span>\n              <span>{adsInfo.adsWatchedToday} / {adsInfo.dailyLimit}</span>\n            </div>\n            <div className=\"progress-bar\">\n              <div \n                className=\"progress-fill\" \n                style={{ width: `${(adsInfo.adsWatchedToday / adsInfo.dailyLimit) * 100}%` }}\n              ></div>\n            </div>\n          </div>\n          <p className=\"text-muted\" style={{ fontSize: '14px', marginTop: '8px' }}>\n            You can watch {adsInfo.remainingToday} more ads today\n          </p>\n        </div>\n\n        {/* Cooldown Timer */}\n        {cooldown > 0 && (\n          <div className=\"card card-gradient\">\n            <div className=\"timer\">\n              <div className=\"timer-value\">{formatTime(cooldown)}</div>\n              <div className=\"timer-label\" style={{ color: 'rgba(255,255,255,0.8)' }}>\n                Next ad available in\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Ad Watching Overlay */}\n        {watching && (\n          <div className=\"modal-overlay\">\n            <div className=\"modal\" style={{ textAlign: 'center', padding: '40px' }}>\n              <div className=\"ad-watching-icon\"><MonitorIcon /></div>\n              <h3 style={{ marginBottom: '16px' }}>\n                {peeredSession ? `Watching Ads (${peeredProgress.completed + 1}/${peeredProgress.total})` : 'Watching Ad...'}\n              </h3>\n              <p className=\"text-muted\">Please wait while the ad plays</p>\n              <div className=\"loading-spinner\" style={{ margin: '20px auto' }}></div>\n              <p style={{ fontSize: '14px', color: 'var(--text-secondary)', marginTop: '12px' }}>\n                Don't close this window\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Cloudflare Turnstile Security Verification - Only shows when interaction is needed */}\n        {settings?.turnstile?.enabled && settings?.turnstile?.siteKey && (\n          <>\n            {/* Hidden container for automatic verification */}\n            <div style={{ position: 'absolute', opacity: 0, pointerEvents: 'none', height: 0, overflow: 'hidden' }}>\n              <Turnstile {...turnstile.turnstileProps} />\n            </div>\n            \n            {/* Only show visible card if there's an error or verification is needed */}\n            {(turnstile.error || turnstile.needsInteraction) && (\n              <div className=\"card\" style={{ marginBottom: '16px' }}>\n                <div className=\"card-header\">\n                  <h2 className=\"card-title\">\n                    <span className=\"card-icon\"></span>\n                    Security Verification Required\n                  </h2>\n                </div>\n                <p className=\"text-muted\" style={{ fontSize: '14px', marginBottom: '12px' }}>\n                  Please complete the verification to continue.\n                </p>\n                <Turnstile \n                  siteKey={settings.turnstile.siteKey}\n                  onVerify={turnstile.handleVerify}\n                  onExpire={turnstile.handleExpire}\n                  onError={turnstile.handleError}\n                  appearance=\"always\"\n                />\n              </div>\n            )}\n          </>\n        )}\n\n        {/* Available Ad Providers */}\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h2 className=\"card-title\">\n              <span className=\"card-icon\"><PlayCircleIcon /></span>\n              Watch Ads to Earn\n            </h2>\n          </div>\n\n          {providers.length === 0 ? (\n            <div className=\"empty-state\">\n              <div className=\"empty-state-icon\"><MailboxIcon /></div>\n              <h3 className=\"empty-state-title\">No Ads Available</h3>\n              <p className=\"empty-state-description\">\n                There are no ad providers available at the moment.\n              </p>\n            </div>\n          ) : (\n            providers.map((provider) => {\n              const isDisabled = cooldown > 0 || watching || adsInfo.remainingToday === 0;\n              const isPeered = provider.isPeered && peeringEnabled;\n              // Count providers in the same peer group\n              const peeredCount = isPeered ? providers.filter(p => p.peerGroupIndex === provider.peerGroupIndex).length : 0;\n              const notEnoughForPeered = isPeered && adsInfo.remainingToday < peeredCount;\n              \n              return (\n                <div \n                  key={provider.id}\n                  className={`ad-provider-card ${isDisabled || notEnoughForPeered ? 'disabled' : ''}`}\n                  onClick={() => !(isDisabled || notEnoughForPeered) && handleAdClick(provider)}\n                  style={{ position: 'relative' }}\n                >\n                  <div className=\"ad-provider-header\">\n                    <div className=\"ad-provider-name\">\n                      <span className=\"ad-provider-icon\">{getProviderIcon(provider.id)}</span> \n                      {provider.name}\n                    </div>\n                    <div className=\"ad-provider-reward\">\n                      +{provider.reward} {currencyName}\n                    </div>\n                  </div>\n                  \n                  <p className=\"ad-provider-description\">\n                    {isPeered \n                      ? `Watch with ${peeredCount - 1} other ad${peeredCount > 2 ? 's' : ''} in sequence`\n                      : 'Watch a short video ad to earn rewards instantly!'\n                    }\n                  </p>\n                  \n                  {isPeered && (\n                    <span style={{ \n                      position: 'absolute',\n                      bottom: '10px',\n                      right: '12px',\n                      fontSize: '9px',\n                      padding: '3px 8px',\n                      background: 'linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.15))',\n                      color: 'var(--primary-color)',\n                      borderRadius: '4px',\n                      fontWeight: '600',\n                      letterSpacing: '0.5px',\n                      border: '1px solid rgba(99, 102, 241, 0.2)'\n                    }}>\n                       PEERED\n                    </span>\n                  )}\n                  \n                  {notEnoughForPeered && (\n                    <p style={{ fontSize: '12px', color: '#ef4444', margin: '8px 0 0 0' }}>\n                      Need {peeredCount} ads remaining (you have {adsInfo.remainingToday})\n                    </p>\n                  )}\n                  \n                  {watching === provider.id && (\n                    <div style={{ marginTop: '12px' }}>\n                      <div className=\"loading-spinner\" style={{ width: '24px', height: '24px', margin: '0 auto' }}></div>\n                    </div>\n                  )}\n                </div>\n              );\n            })\n          )}\n        </div>\n\n        {/* Tips */}\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h2 className=\"card-title\">\n              <span className=\"card-icon tips-icon\"><LightbulbIcon /></span>\n              Tips\n            </h2>\n          </div>\n          <div style={{ fontSize: '14px', color: 'var(--text-secondary)' }}>\n            <p style={{ marginBottom: '8px' }}> Watch ads regularly to maximize your earnings</p>\n            <p style={{ marginBottom: '8px' }}> Each ad has a {adsInfo.cooldown} second cooldown</p>\n            <p style={{ marginBottom: '8px' }}> You can watch up to {adsInfo.dailyLimit} ads per day</p>\n            {peeringEnabled && providers.some(p => p.isPeered) && (\n              <p style={{ marginBottom: '8px' }}> Ads marked \"PEERED\" must be watched together in sequence</p>\n            )}\n            <p> Rewards are credited instantly after watching</p>\n          </div>\n        </div>\n      </div>\n      <BottomNav />\n      \n      {/* Success Popup for Ad Completion */}\n      <SuccessPopup\n        show={!!successPopup}\n        onClose={() => setSuccessPopup(null)}\n        type={successPopup?.type || 'ads'}\n        reward={successPopup?.reward}\n        currencyName={currencyName}\n        newBalance={successPopup?.newBalance}\n      />\n    </>\n  );\n}\n\nexport default Ads;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}