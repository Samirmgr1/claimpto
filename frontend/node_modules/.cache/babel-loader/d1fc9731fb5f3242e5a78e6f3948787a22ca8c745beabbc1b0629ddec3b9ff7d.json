{"ast":null,"code":"import _objectSpread from\"/workspaces/claimpto/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useRef}from'react';import{Link}from'react-router-dom';import axios from'axios';import{useAuth,useData}from'../../context/AuthContext';import Navbar from'../common/Navbar';import BottomNav from'../common/BottomNav';import SuccessPopup from'../common/SuccessPopup';import Turnstile,{useTurnstile}from'../common/Turnstile';// Premium SVG Icons\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const WalletIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"1\",y:\"4\",width:\"22\",height:\"16\",rx:\"2\",ry:\"2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"1\",y1:\"10\",x2:\"23\",y2:\"10\"})]});const TrendUpIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"23 6 13.5 15.5 8.5 10.5 1 18\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"17 6 23 6 23 12\"})]});const WithdrawIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"1\",x2:\"12\",y2:\"15\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"5 8 12 1 19 8\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M5 21h14a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2z\"})]});const UsersIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"9\",cy:\"7\",r:\"4\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M23 21v-2a4 4 0 0 0-3-3.87\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M16 3.13a4 4 0 0 1 0 7.75\"})]});const DropletIcon=()=>/*#__PURE__*/_jsx(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z\"})});const GiftIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M20 12v10H4V12\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M2 7h20v5H2z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12 22V7\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z\"})]});const TaskIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M9 11l3 3L22 4\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\"})]});const AdsIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"2\",y:\"3\",width:\"20\",height:\"14\",rx:\"2\",ry:\"2\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M8 21h8\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12 17v4\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"10,8 10,12 14,10\"})]});const BoltIcon=()=>/*#__PURE__*/_jsx(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:/*#__PURE__*/_jsx(\"polygon\",{points:\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"})});const ListIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"8\",y1:\"6\",x2:\"21\",y2:\"6\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"8\",y1:\"12\",x2:\"21\",y2:\"12\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"8\",y1:\"18\",x2:\"21\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"3\",y1:\"6\",x2:\"3.01\",y2:\"6\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"3\",y1:\"12\",x2:\"3.01\",y2:\"12\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"3\",y1:\"18\",x2:\"3.01\",y2:\"18\"})]});const ChartIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"20\",x2:\"18\",y2:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"20\",x2:\"12\",y2:\"4\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"20\",x2:\"6\",y2:\"14\"})]});const CoinIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12 6v12\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M15 9.5c0-1.38-1.34-2.5-3-2.5s-3 1.12-3 2.5 1.34 2.5 3 2.5 3 1.12 3 2.5-1.34 2.5-3 2.5\"})]});const AlertIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"48\",height:\"48\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"8\",x2:\"12\",y2:\"12\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"16\",x2:\"12.01\",y2:\"16\"})]});const RefreshIcon=()=>/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"23 4 23 10 17 10\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M20.49 15a9 9 0 1 1-2.12-9.36L23 10\"})]});function Dashboard(){var _settings$turnstile,_user$firstName,_user$firstName$,_user$balance,_user$totalEarnings,_user$totalWithdrawal,_faucetStatus$adProvi,_settings$turnstile2,_settings$turnstile3,_faucetStatus$adProvi2,_user$referralEarning;const{user}=useAuth();const{fetchDashboard,fetchFaucetStatus:fetchCachedFaucetStatus,faucetStatus:cachedFaucetStatus,invalidateCache,settings}=useData();const turnstile=useTurnstile(settings===null||settings===void 0?void 0:(_settings$turnstile=settings.turnstile)===null||_settings$turnstile===void 0?void 0:_settings$turnstile.siteKey);const[dashboardData,setDashboardData]=useState(null);const[faucetStatus,setFaucetStatus]=useState(cachedFaucetStatus);const[loading,setLoading]=useState(!user);// Don't show loading if we have cached user\nconst[claiming,setClaiming]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[successPopup,setSuccessPopup]=useState(null);const[debugLogs,setDebugLogs]=useState([]);// Ad-related state for faucet claim\nconst[adProgress,setAdProgress]=useState(null);// { current: 1, total: 3, status: 'watching' | 'completed' | 'error' }\nconst adsgramScriptLoaded=useRef(false);const adsgramBlockId=useRef(null);const adsgramController=useRef(null);const monetagScriptLoaded=useRef(false);const monetagZoneId=useRef(null);const adExtraScriptLoaded=useRef(false);const adExtraPlacementId=useRef(null);const adexoraScriptLoaded=useRef(false);const adexoraAppId=useRef(null);// Get Telegram user photo URL\nconst getTelegramPhotoUrl=()=>{try{var _window$Telegram,_tg$initDataUnsafe,_tg$initDataUnsafe$us;const tg=(_window$Telegram=window.Telegram)===null||_window$Telegram===void 0?void 0:_window$Telegram.WebApp;if(tg!==null&&tg!==void 0&&(_tg$initDataUnsafe=tg.initDataUnsafe)!==null&&_tg$initDataUnsafe!==void 0&&(_tg$initDataUnsafe$us=_tg$initDataUnsafe.user)!==null&&_tg$initDataUnsafe$us!==void 0&&_tg$initDataUnsafe$us.photo_url){return tg.initDataUnsafe.user.photo_url;}}catch(e){console.log('Could not get Telegram photo');}return null;};const telegramPhotoUrl=getTelegramPhotoUrl();// Debug logger helper\nconst logDebug=useCallback(function(message){let data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const timestamp=new Date().toLocaleTimeString();const logEntry=\"[\".concat(timestamp,\"] \").concat(message).concat(data?': '+JSON.stringify(data):'');console.log(logEntry);setDebugLogs(prev=>[...prev.slice(-19),logEntry]);// Keep last 20 logs\n},[]);const fetchDashboardData=useCallback(async()=>{logDebug('Fetching dashboard data (with cache)...');try{const data=await fetchDashboard();if(data){logDebug('Dashboard data received',{hasUser:!!(data!==null&&data!==void 0&&data.user)});setDashboardData(data);setError(null);}}catch(err){var _err$response,_err$response2,_err$response2$data;const errorDetails={message:err.message,status:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status,isNetworkError:!err.response};logDebug('Dashboard fetch error',errorDetails);setError(\"Failed to load dashboard: \".concat(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||err.message));console.error('Dashboard error:',err);}finally{setLoading(false);}},[fetchDashboard,logDebug]);const fetchFaucetStatusData=useCallback(async()=>{logDebug('Fetching faucet status (with cache)...');try{const data=await fetchCachedFaucetStatus();if(data){logDebug('Faucet status received',{canClaim:data===null||data===void 0?void 0:data.canClaim});setFaucetStatus(data);}}catch(err){var _err$response3;logDebug('Faucet status error',{message:err.message,status:(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.status});console.error('Faucet status error:',err);}},[fetchCachedFaucetStatus,logDebug]);useEffect(()=>{// Use cached data if available, but still fetch fresh data in background\nif(cachedFaucetStatus){setFaucetStatus(cachedFaucetStatus);}fetchDashboardData();fetchFaucetStatusData();},[fetchDashboardData,fetchFaucetStatusData,cachedFaucetStatus]);// Countdown timer\nuseEffect(()=>{if(faucetStatus&&!faucetStatus.canClaim&&faucetStatus.remainingSeconds>0){const timer=setInterval(()=>{setFaucetStatus(prev=>{if(!prev||prev.remainingSeconds<=1){invalidateCache('faucet');fetchFaucetStatusData();return prev;}return _objectSpread(_objectSpread({},prev),{},{remainingSeconds:prev.remainingSeconds-1});});},1000);return()=>clearInterval(timer);}},[faucetStatus,fetchFaucetStatusData,invalidateCache]);// Ad loading functions for faucet claim\nconst loadAdsgramScript=useCallback(blockId=>{return new Promise((resolve,reject)=>{if(adsgramScriptLoaded.current&&adsgramBlockId.current===blockId&&adsgramController.current){resolve(adsgramController.current);return;}const existingScript=document.getElementById('adsgram-script');const initController=()=>{if(window.Adsgram){try{const AdController=window.Adsgram.init({blockId});adsgramScriptLoaded.current=true;adsgramBlockId.current=blockId;adsgramController.current=AdController;resolve(AdController);}catch(err){reject(new Error('Failed to initialize Adsgram SDK'));}}else{reject(new Error('Adsgram SDK not available'));}};if(existingScript&&window.Adsgram){initController();return;}if(existingScript)existingScript.remove();const script=document.createElement('script');script.id='adsgram-script';script.src='https://sad.adsgram.ai/js/sad.min.js';script.async=true;script.onload=()=>setTimeout(()=>initController(),100);script.onerror=()=>reject(new Error('Failed to load Adsgram SDK'));document.head.appendChild(script);});},[]);const loadMonetagScript=useCallback(zoneId=>{return new Promise((resolve,reject)=>{if(monetagScriptLoaded.current&&monetagZoneId.current===zoneId){resolve();return;}const existingScript=document.getElementById('monetag-script');if(existingScript)existingScript.remove();const script=document.createElement('script');script.id='monetag-script';script.src='//libtl.com/sdk.js';script.setAttribute('data-zone',zoneId);script.setAttribute('data-sdk',\"show_\".concat(zoneId));script.onload=()=>{monetagScriptLoaded.current=true;monetagZoneId.current=zoneId;resolve();};script.onerror=()=>reject(new Error('Failed to load Monetag script'));document.head.appendChild(script);});},[]);const loadAdExtraScript=useCallback(placementId=>{return new Promise((resolve,reject)=>{if(adExtraScriptLoaded.current&&adExtraPlacementId.current===placementId){resolve();return;}const existingScript=document.getElementById('adextra-script');if(existingScript)existingScript.remove();const existingContainer=document.getElementById(placementId);if(existingContainer)existingContainer.remove();const container=document.createElement('div');container.id=placementId;document.body.appendChild(container);const script=document.createElement('script');script.id='adextra-script';script.src=\"https://partner.adextra.io/jt/\".concat(placementId,\".js\");script.async=true;script.onload=()=>{adExtraScriptLoaded.current=true;adExtraPlacementId.current=placementId;resolve();};script.onerror=()=>reject(new Error('Failed to load AdExtra script'));document.head.appendChild(script);});},[]);const loadAdexoraScript=useCallback(appId=>{return new Promise((resolve,reject)=>{if(adexoraScriptLoaded.current&&adexoraAppId.current===appId){resolve();return;}const existingScript=document.getElementById('adexora-script');if(existingScript)existingScript.remove();const script=document.createElement('script');script.id='adexora-script';script.src=\"https://adexora.com/cdn/ads.js?id=\".concat(appId);script.onload=()=>{adexoraScriptLoaded.current=true;adexoraAppId.current=appId;resolve();};script.onerror=()=>reject(new Error('Failed to load Adexora script'));document.head.appendChild(script);});},[]);// Show a single ad and return a promise\n// STRICT: Only shows ads from providers that are explicitly configured by admin for faucet claim\n// No fallback or alternative providers - if config is missing, the ad fails\nconst showSingleAd=useCallback(async provider=>{const{id,config}=provider;// Validate that provider has required config - no fallback allowed\nif(!id||!config){return Promise.reject(new Error('Invalid provider configuration'));}return new Promise((resolve,reject)=>{if(id==='adsgram'){if(!config.blockId){return reject(new Error('Adsgram not properly configured'));}loadAdsgramScript(config.blockId).then(AdController=>{AdController.show().then(()=>resolve()).catch(result=>reject(new Error((result===null||result===void 0?void 0:result.description)||'Ad not completed')));}).catch(err=>reject(err));}else if(id==='monetag'){if(!config.zoneId){return reject(new Error('Monetag not properly configured'));}loadMonetagScript(config.zoneId).then(()=>{const tryShowAd=function(){let attempts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;const showFn=\"show_\".concat(config.zoneId);if(typeof window[showFn]==='function'){window[showFn]().then(()=>resolve()).catch(()=>reject(new Error('Ad not completed')));}else if(attempts<10){setTimeout(()=>tryShowAd(attempts+1),500);}else{reject(new Error('Ad provider failed to initialize'));}};setTimeout(()=>tryShowAd(0),500);}).catch(err=>reject(err));}else if(id==='adextra'){if(!config.placementId){return reject(new Error('AdExtra not properly configured'));}loadAdExtraScript(config.placementId).then(()=>{const tryShowAd=function(){let attempts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(typeof window.p_adextra==='function'){window.p_adextra(()=>resolve(),()=>reject(new Error('Ad not completed')));}else if(attempts<10){setTimeout(()=>tryShowAd(attempts+1),500);}else{reject(new Error('Ad provider failed to initialize'));}};setTimeout(()=>tryShowAd(0),500);}).catch(err=>reject(err));}else if(id==='adexora'){if(!config.appId){return reject(new Error('Adexora not properly configured'));}loadAdexoraScript(config.appId).then(()=>{const tryShowAd=function(){let attempts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(typeof window.showAdexora==='function'){window.showAdexora().then(()=>resolve()).catch(()=>reject(new Error('Ad not completed')));}else if(attempts<10){setTimeout(()=>tryShowAd(attempts+1),500);}else{reject(new Error('Ad provider failed to initialize'));}};setTimeout(()=>tryShowAd(0),500);}).catch(err=>reject(err));}else{// Unknown provider - strict enforcement, no fallback\nreject(new Error(\"Unknown ad provider: \".concat(id)));}});},[loadAdsgramScript,loadMonetagScript,loadAdExtraScript,loadAdexoraScript]);const claimFaucet=async()=>{if(claiming)return;setClaiming(true);setError(null);setSuccess(null);let actionToken=null;try{// STEP 1: Start faucet session to get action token\n// This prevents direct API calls to /claim without going through proper flow\nlogDebug('Starting faucet session...');const startResponse=await axios.post('/earnings/faucet/start');actionToken=startResponse.data.actionToken;const minTimeSeconds=startResponse.data.minTimeSeconds||0;const adProviders=startResponse.data.adProviders||[];const totalAds=adProviders.length;logDebug('Faucet session started',{tokenReceived:!!actionToken,minTimeSeconds,adCount:totalAds});// STEP 2: Show ads if any (this takes time, satisfying minTimeSeconds)\nif(totalAds>0){setAdProgress({current:0,total:totalAds,status:'watching'});for(let i=0;i<totalAds;i++){setAdProgress({current:i+1,total:totalAds,status:'watching'});try{await showSingleAd(adProviders[i]);}catch(adError){// Log the error but continue to next ad (graceful degradation)\nconsole.warn(\"Ad \".concat(i+1,\" failed:\"),adError.message);// Short delay before next ad attempt\nawait new Promise(resolve=>setTimeout(resolve,500));}}setAdProgress({current:totalAds,total:totalAds,status:'completed'});// Small delay to show completion\nawait new Promise(resolve=>setTimeout(resolve,500));}else if(minTimeSeconds>0){// No ads but we still need to wait minimum time\n// The server will reject early claims anyway, but let's be nice to UX\nlogDebug(\"Waiting minimum time: \".concat(minTimeSeconds,\"s\"));await new Promise(resolve=>setTimeout(resolve,minTimeSeconds*1000));}// STEP 3: Claim the reward with action token\n// Include Turnstile token if available (backend will bypass for Telegram users)\nlogDebug('Claiming faucet with action token...');const response=await axios.post('/earnings/faucet/claim',{actionToken,turnstileToken:turnstile.token||undefined});// Show success popup\nsetSuccessPopup({type:'faucet',reward:response.data.reward,newBalance:response.data.newBalance});invalidateCache('faucet');invalidateCache('dashboard');fetchDashboardData();fetchFaucetStatusData();// Reset Turnstile after successful claim (if token was used)\nif(turnstile.token){turnstile.reset();}}catch(error){var _error$response,_error$response$data,_error$response2,_error$response2$data,_error$response3,_error$response4;const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to claim reward';const errorCode=(_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error;if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===429){const remainingSeconds=error.response.data.remainingSeconds;setError(\"\\u23F0 \".concat(errorMessage||\"Cooldown active. Wait \".concat(remainingSeconds,\" seconds\")));}else if(errorCode==='TOKEN_MIN_TIME_NOT_PASSED'){setError(\"\\u23F3 Please wait a moment and try again\");}else if(errorCode==='TOKEN_INVALID_OR_CONSUMED'){setError('Session expired. Please try again.');// Refresh faucet status to get latest state\nfetchFaucetStatusData();}else{setError(errorMessage);}logDebug('Faucet claim error',{status:(_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status,message:errorMessage,error:errorCode});// Reset Turnstile on error (if token was used)\nif(turnstile.token){turnstile.reset();}}finally{setClaiming(false);setAdProgress(null);}};const formatTime=seconds=>{const mins=Math.floor(seconds/60);const secs=seconds%60;return\"\".concat(mins,\":\").concat(secs.toString().padStart(2,'0'));};const getEarningIcon=type=>{const icons={faucet:/*#__PURE__*/_jsx(DropletIcon,{}),task:/*#__PURE__*/_jsx(TaskIcon,{}),referral:/*#__PURE__*/_jsx(UsersIcon,{}),ads:/*#__PURE__*/_jsx(AdsIcon,{}),bonus:/*#__PURE__*/_jsx(GiftIcon,{})};return icons[type]||/*#__PURE__*/_jsx(CoinIcon,{});};if(loading){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container page-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading dashboard...\"})]})}),/*#__PURE__*/_jsx(BottomNav,{})]});}if(error&&!dashboardData){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container page-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{textAlign:'center',padding:'40px 20px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'16px',color:'var(--warning-color)'},children:/*#__PURE__*/_jsx(AlertIcon,{})}),/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:'12px'},children:\"Failed to Load Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",style:{marginBottom:'20px'},children:error}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>{setError(null);setLoading(true);fetchDashboardData();},children:[/*#__PURE__*/_jsx(RefreshIcon,{}),\" Try Again\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginTop:'16px',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginBottom:'12px',fontSize:'14px'},children:\"\\uD83D\\uDD0D Debug Info\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',fontFamily:'monospace',background:'#1a1a2e',color:'#0f0',padding:'12px',borderRadius:'8px',maxHeight:'200px',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'8px',color:'#ff0'},children:[\"API URL: \",axios.defaults.baseURL]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'8px',color:'#ff0'},children:[\"Token: \",localStorage.getItem('token')?'Present ('+localStorage.getItem('token').substring(0,20)+'...)':'Missing']}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'8px',color:'#ff0'},children:[\"User ID: \",(user===null||user===void 0?void 0:user.telegramId)||'N/A']}),/*#__PURE__*/_jsx(\"div\",{style:{borderTop:'1px solid #333',paddingTop:'8px',marginTop:'8px'},children:debugLogs.map((log,i)=>/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'4px',wordBreak:'break-all'},children:log},i))})]})]})]}),/*#__PURE__*/_jsx(BottomNav,{})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container page-content\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success\",children:success}),adProgress&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",style:{textAlign:'center',padding:'40px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'16px'},children:\"\\uD83D\\uDCFA\"}),/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:'8px'},children:adProgress.status==='completed'?'Ads Completed!':'Watching Ads...'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",style:{marginBottom:'16px'},children:adProgress.status==='completed'?'Claiming your reward...':\"Please watch the ad to claim your reward\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',gap:'8px',marginBottom:'16px'},children:Array.from({length:adProgress.total}).map((_,i)=>/*#__PURE__*/_jsx(\"div\",{style:{width:'12px',height:'12px',borderRadius:'50%',background:i<adProgress.current?'var(--success-color, #28a745)':'var(--border-color, #333)',transition:'background 0.3s ease'}},i))}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'14px',color:'var(--text-secondary)'},children:[\"Ad \",adProgress.current,\" of \",adProgress.total]}),adProgress.status==='watching'&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",style:{margin:'16px auto 0'}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card card-gradient\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'16px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"welcome-avatar\",style:telegramPhotoUrl?{padding:0,overflow:'hidden'}:{},children:telegramPhotoUrl?/*#__PURE__*/_jsx(\"img\",{src:telegramPhotoUrl,alt:\"Profile\",style:{width:'100%',height:'100%',objectFit:'cover',borderRadius:'50%'}}):(user===null||user===void 0?void 0:(_user$firstName=user.firstName)===null||_user$firstName===void 0?void 0:(_user$firstName$=_user$firstName[0])===null||_user$firstName$===void 0?void 0:_user$firstName$.toUpperCase())||'U'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{style:{color:'#fff',marginBottom:'4px'},children:[\"Hello, \",(user===null||user===void 0?void 0:user.firstName)||'User',\"!\"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'rgba(255,255,255,0.8)',fontSize:'14px'},children:\"Welcome back to your earning dashboard\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(WalletIcon,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:(user===null||user===void 0?void 0:(_user$balance=user.balance)===null||_user$balance===void 0?void 0:_user$balance.toFixed(5))||'0.00000'}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Balance\"}),(settings===null||settings===void 0?void 0:settings.currencyMode)==='points'&&(user===null||user===void 0?void 0:user.balance)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"stat-usd-equivalent\",children:[\"\\u2248 $\",(user.balance/((settings===null||settings===void 0?void 0:settings.pointsExchangeRate)||1000)).toFixed(5)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(TrendUpIcon,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:(user===null||user===void 0?void 0:(_user$totalEarnings=user.totalEarnings)===null||_user$totalEarnings===void 0?void 0:_user$totalEarnings.toFixed(5))||'0.00000'}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Total Earned\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(WithdrawIcon,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:(user===null||user===void 0?void 0:(_user$totalWithdrawal=user.totalWithdrawals)===null||_user$totalWithdrawal===void 0?void 0:_user$totalWithdrawal.toFixed(5))||'0.00000'}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Withdrawn\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:/*#__PURE__*/_jsx(UsersIcon,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:(user===null||user===void 0?void 0:user.referralCount)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Referrals\"})]})]}),faucetStatus&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{background:'var(--bg-card)',border:'1px solid var(--border-color)',borderRadius:'16px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",style:{borderBottom:'1px solid var(--border-color)',paddingBottom:'14px'},children:/*#__PURE__*/_jsxs(\"h2\",{className:\"card-title\",style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-icon\",style:{background:'linear-gradient(135deg, rgba(99, 102, 241, 0.12) 0%, rgba(139, 92, 246, 0.12) 100%)',borderRadius:'10px',padding:'8px',color:'var(--primary-color)'},children:/*#__PURE__*/_jsx(DropletIcon,{})}),\"Faucet Claim\"]})}),faucetStatus.noAdsAvailable?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'24px 16px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'12px',opacity:0.6,filter:'grayscale(1)'},children:\"\\uD83D\\uDCFA\"}),/*#__PURE__*/_jsx(\"h4\",{style:{marginBottom:'8px',color:'var(--text-secondary)',fontSize:'15px'},children:\"Faucet Temporarily Unavailable\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-muted)',fontSize:'13px'},children:\"No ad providers are currently configured. Please check back later.\"})]}):faucetStatus.canClaim?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'20px 0 8px',background:'linear-gradient(180deg, rgba(99, 102, 241, 0.05) 0%, transparent 100%)',borderRadius:'12px',margin:'8px -4px 0'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"faucet-ready-icon\",style:{width:'64px',height:'64px',margin:'0 auto 16px',background:'linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(52, 211, 153, 0.15) 100%)',borderRadius:'16px',display:'flex',alignItems:'center',justifyContent:'center',border:'2px solid rgba(16, 185, 129, 0.2)',color:'#10b981'},children:/*#__PURE__*/_jsx(GiftIcon,{})}),/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'16px',color:'var(--text-secondary)',fontSize:'14px'},children:((_faucetStatus$adProvi=faucetStatus.adProviders)===null||_faucetStatus$adProvi===void 0?void 0:_faucetStatus$adProvi.length)>0?\"Watch \".concat(faucetStatus.adProviders.length,\" ad\").concat(faucetStatus.adProviders.length>1?'s':'',\" to claim your reward!\"):'Your reward is ready to claim!'}),(settings===null||settings===void 0?void 0:(_settings$turnstile2=settings.turnstile)===null||_settings$turnstile2===void 0?void 0:_settings$turnstile2.enabled)&&(settings===null||settings===void 0?void 0:(_settings$turnstile3=settings.turnstile)===null||_settings$turnstile3===void 0?void 0:_settings$turnstile3.siteKey)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',opacity:0,pointerEvents:'none',height:0,overflow:'hidden'},children:/*#__PURE__*/_jsx(Turnstile,_objectSpread({},turnstile.turnstileProps))}),(turnstile.error||turnstile.needsInteraction)&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px',display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'13px',color:'var(--text-secondary)',marginBottom:'8px'},children:\"Please complete the verification\"}),/*#__PURE__*/_jsx(Turnstile,{siteKey:settings.turnstile.siteKey,onVerify:turnstile.handleVerify,onError:turnstile.handleError,onExpire:turnstile.handleExpire,appearance:\"always\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:claimFaucet,disabled:claiming,style:{width:'100%',maxWidth:'280px',padding:'14px 24px',borderRadius:'12px',fontSize:'15px',fontWeight:'600'},children:claiming?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",style:{width:'18px',height:'18px',marginRight:'8px'}}),adProgress?'Watching Ads...':'Claiming...']}):/*#__PURE__*/_jsxs(_Fragment,{children:[((_faucetStatus$adProvi2=faucetStatus.adProviders)===null||_faucetStatus$adProvi2===void 0?void 0:_faucetStatus$adProvi2.length)>0?'ðŸ“º ':'ðŸŽ ',\"Claim \",faucetStatus.reward,\" Coins\"]})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"timer\",style:{background:'linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%)',borderRadius:'16px',padding:'24px',border:'1px solid rgba(99, 102, 241, 0.2)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"timer-value\",style:{color:'#ffffff',fontSize:'48px',fontWeight:'800',textShadow:'0 2px 10px rgba(99, 102, 241, 0.3)',marginBottom:'8px'},children:formatTime(faucetStatus.remainingSeconds)}),/*#__PURE__*/_jsx(\"div\",{className:\"timer-label\",style:{color:'rgba(255, 255, 255, 0.8)',fontSize:'13px',fontWeight:'500',letterSpacing:'0.5px'},children:\"Next claim available in\"}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",style:{marginTop:'20px',maxWidth:'280px',margin:'20px auto 0',height:'8px',background:'rgba(255, 255, 255, 0.1)',borderRadius:'4px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(Math.max(0,100-faucetStatus.remainingSeconds/(faucetStatus.cooldown||300)*100),\"%\"),background:'linear-gradient(90deg, #6366f1 0%, #a855f7 100%)',boxShadow:'0 0 10px rgba(99, 102, 241, 0.5)'}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-icon\",children:/*#__PURE__*/_jsx(BoltIcon,{})}),\"Earn More\"]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(2, 1fr)',gap:'12px'},children:[/*#__PURE__*/_jsxs(Link,{to:\"/tasks\",className:\"action-card\",style:{textDecoration:'none'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-icon\",children:/*#__PURE__*/_jsx(TaskIcon,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"action-label\",children:\"Tasks\"}),/*#__PURE__*/_jsx(\"div\",{className:\"action-sublabel\",children:\"Complete & Earn\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/ads\",className:\"action-card\",style:{textDecoration:'none'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-icon\",children:/*#__PURE__*/_jsx(AdsIcon,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"action-label\",children:\"Watch Ads\"}),/*#__PURE__*/_jsx(\"div\",{className:\"action-sublabel\",children:\"Watch & Earn\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/referrals\",className:\"action-card\",style:{textDecoration:'none'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-icon\",children:/*#__PURE__*/_jsx(UsersIcon,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"action-label\",children:\"Referrals\"}),/*#__PURE__*/_jsx(\"div\",{className:\"action-sublabel\",children:\"Invite & Earn\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/withdrawals\",className:\"action-card\",style:{textDecoration:'none'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-icon\",children:/*#__PURE__*/_jsx(WithdrawIcon,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"action-label\",children:\"Withdraw\"}),/*#__PURE__*/_jsx(\"div\",{className:\"action-sublabel\",children:\"Cash Out\"})]})]})]}),(dashboardData===null||dashboardData===void 0?void 0:dashboardData.recentEarnings)&&dashboardData.recentEarnings.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-icon\",children:/*#__PURE__*/_jsx(ListIcon,{})}),\"Recent Earnings\"]}),/*#__PURE__*/_jsx(Link,{to:\"/earnings\",className:\"btn btn-outline\",style:{padding:'8px 16px',fontSize:'14px'},children:\"View All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"earnings-list\",children:dashboardData.recentEarnings.slice(0,5).map(earning=>/*#__PURE__*/_jsxs(\"div\",{className:\"earning-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"earning-icon\",children:getEarningIcon(earning.type)}),/*#__PURE__*/_jsxs(\"div\",{className:\"earning-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"earning-description\",children:earning.description||earning.type.charAt(0).toUpperCase()+earning.type.slice(1)}),/*#__PURE__*/_jsx(\"div\",{className:\"earning-date\",children:new Date(earning.createdAt).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"earning-amount\",children:[\"+\",earning.amount.toFixed(5)]})]},earning._id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-icon\",children:/*#__PURE__*/_jsx(ChartIcon,{})}),\"Your Stats\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-list-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Referral Earnings\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stats-list-value\",children:[(user===null||user===void 0?void 0:(_user$referralEarning=user.referralEarnings)===null||_user$referralEarning===void 0?void 0:_user$referralEarning.toFixed(5))||'0.00000',\" coins\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-list-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Referrals\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stats-list-value\",children:[(user===null||user===void 0?void 0:user.referralCount)||0,\" users\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-list-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Member Since\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stats-list-value\",children:user!==null&&user!==void 0&&user.createdAt?new Date(user.createdAt).toLocaleDateString():'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-list-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-\".concat((user===null||user===void 0?void 0:user.status)==='active'?'success':'warning'),children:(user===null||user===void 0?void 0:user.status)||'Active'})]})]})]})]}),/*#__PURE__*/_jsx(BottomNav,{}),/*#__PURE__*/_jsx(SuccessPopup,{show:!!successPopup,onClose:()=>setSuccessPopup(null),type:(successPopup===null||successPopup===void 0?void 0:successPopup.type)||'faucet',reward:successPopup===null||successPopup===void 0?void 0:successPopup.reward,currencyName:\"Coins\",newBalance:successPopup===null||successPopup===void 0?void 0:successPopup.newBalance})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","Link","axios","useAuth","useData","Navbar","BottomNav","SuccessPopup","Turnstile","useTurnstile","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","WalletIcon","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","children","x","y","rx","ry","x1","y1","x2","y2","TrendUpIcon","points","WithdrawIcon","d","UsersIcon","cx","cy","r","DropletIcon","GiftIcon","TaskIcon","AdsIcon","BoltIcon","ListIcon","ChartIcon","CoinIcon","AlertIcon","RefreshIcon","Dashboard","_settings$turnstile","_user$firstName","_user$firstName$","_user$balance","_user$totalEarnings","_user$totalWithdrawal","_faucetStatus$adProvi","_settings$turnstile2","_settings$turnstile3","_faucetStatus$adProvi2","_user$referralEarning","user","fetchDashboard","fetchFaucetStatus","fetchCachedFaucetStatus","faucetStatus","cachedFaucetStatus","invalidateCache","settings","turnstile","siteKey","dashboardData","setDashboardData","setFaucetStatus","loading","setLoading","claiming","setClaiming","error","setError","success","setSuccess","successPopup","setSuccessPopup","debugLogs","setDebugLogs","adProgress","setAdProgress","adsgramScriptLoaded","adsgramBlockId","adsgramController","monetagScriptLoaded","monetagZoneId","adExtraScriptLoaded","adExtraPlacementId","adexoraScriptLoaded","adexoraAppId","getTelegramPhotoUrl","_window$Telegram","_tg$initDataUnsafe","_tg$initDataUnsafe$us","tg","window","Telegram","WebApp","initDataUnsafe","photo_url","e","console","log","telegramPhotoUrl","logDebug","message","data","arguments","length","undefined","timestamp","Date","toLocaleTimeString","logEntry","concat","JSON","stringify","prev","slice","fetchDashboardData","hasUser","err","_err$response","_err$response2","_err$response2$data","errorDetails","status","response","isNetworkError","fetchFaucetStatusData","canClaim","_err$response3","remainingSeconds","timer","setInterval","_objectSpread","clearInterval","loadAdsgramScript","blockId","Promise","resolve","reject","current","existingScript","document","getElementById","initController","Adsgram","AdController","init","Error","remove","script","createElement","id","src","async","onload","setTimeout","onerror","head","appendChild","loadMonetagScript","zoneId","setAttribute","loadAdExtraScript","placementId","existingContainer","container","body","loadAdexoraScript","appId","showSingleAd","provider","config","then","show","catch","result","description","tryShowAd","attempts","showFn","p_adextra","showAdexora","claimFaucet","actionToken","startResponse","post","minTimeSeconds","adProviders","totalAds","tokenReceived","adCount","total","i","adError","warn","turnstileToken","token","type","reward","newBalance","reset","_error$response","_error$response$data","_error$response2","_error$response2$data","_error$response3","_error$response4","errorMessage","errorCode","formatTime","seconds","mins","Math","floor","secs","toString","padStart","getEarningIcon","icons","faucet","task","referral","ads","bonus","className","style","textAlign","padding","marginBottom","color","onClick","marginTop","fontSize","fontFamily","background","borderRadius","maxHeight","overflow","defaults","baseURL","localStorage","getItem","substring","telegramId","borderTop","paddingTop","map","wordBreak","display","justifyContent","gap","Array","from","_","transition","margin","alignItems","alt","objectFit","firstName","toUpperCase","balance","toFixed","currencyMode","pointsExchangeRate","totalEarnings","totalWithdrawals","referralCount","border","borderBottom","paddingBottom","noAdsAvailable","opacity","filter","enabled","position","pointerEvents","turnstileProps","needsInteraction","flexDirection","onVerify","handleVerify","onError","handleError","onExpire","handleExpire","appearance","disabled","maxWidth","fontWeight","marginRight","textShadow","letterSpacing","max","cooldown","boxShadow","gridTemplateColumns","to","textDecoration","recentEarnings","earning","charAt","createdAt","toLocaleString","amount","_id","referralEarnings","toLocaleDateString","onClose","currencyName"],"sources":["/workspaces/claimpto/frontend/src/components/user/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useAuth, useData } from '../../context/AuthContext';\nimport Navbar from '../common/Navbar';\nimport BottomNav from '../common/BottomNav';\nimport SuccessPopup from '../common/SuccessPopup';\nimport Turnstile, { useTurnstile } from '../common/Turnstile';\n\n// Premium SVG Icons\nconst WalletIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <rect x=\"1\" y=\"4\" width=\"22\" height=\"16\" rx=\"2\" ry=\"2\"/>\n    <line x1=\"1\" y1=\"10\" x2=\"23\" y2=\"10\"/>\n  </svg>\n);\n\nconst TrendUpIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <polyline points=\"23 6 13.5 15.5 8.5 10.5 1 18\"/>\n    <polyline points=\"17 6 23 6 23 12\"/>\n  </svg>\n);\n\nconst WithdrawIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"15\"/>\n    <polyline points=\"5 8 12 1 19 8\"/>\n    <path d=\"M5 21h14a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2z\"/>\n  </svg>\n);\n\nconst UsersIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"/>\n    <circle cx=\"9\" cy=\"7\" r=\"4\"/>\n    <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\"/>\n    <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"/>\n  </svg>\n);\n\nconst DropletIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z\"/>\n  </svg>\n);\n\nconst GiftIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M20 12v10H4V12\"/>\n    <path d=\"M2 7h20v5H2z\"/>\n    <path d=\"M12 22V7\"/>\n    <path d=\"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z\"/>\n    <path d=\"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z\"/>\n  </svg>\n);\n\nconst TaskIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M9 11l3 3L22 4\"/>\n    <path d=\"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\"/>\n  </svg>\n);\n\nconst AdsIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\n    <path d=\"M8 21h8\"/>\n    <path d=\"M12 17v4\"/>\n    <polygon points=\"10,8 10,12 14,10\"/>\n  </svg>\n);\n\nconst BoltIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <polygon points=\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"/>\n  </svg>\n);\n\nconst ListIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <line x1=\"8\" y1=\"6\" x2=\"21\" y2=\"6\"/>\n    <line x1=\"8\" y1=\"12\" x2=\"21\" y2=\"12\"/>\n    <line x1=\"8\" y1=\"18\" x2=\"21\" y2=\"18\"/>\n    <line x1=\"3\" y1=\"6\" x2=\"3.01\" y2=\"6\"/>\n    <line x1=\"3\" y1=\"12\" x2=\"3.01\" y2=\"12\"/>\n    <line x1=\"3\" y1=\"18\" x2=\"3.01\" y2=\"18\"/>\n  </svg>\n);\n\nconst ChartIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <line x1=\"18\" y1=\"20\" x2=\"18\" y2=\"10\"/>\n    <line x1=\"12\" y1=\"20\" x2=\"12\" y2=\"4\"/>\n    <line x1=\"6\" y1=\"20\" x2=\"6\" y2=\"14\"/>\n  </svg>\n);\n\nconst CoinIcon = () => (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <circle cx=\"12\" cy=\"12\" r=\"10\"/>\n    <path d=\"M12 6v12\"/>\n    <path d=\"M15 9.5c0-1.38-1.34-2.5-3-2.5s-3 1.12-3 2.5 1.34 2.5 3 2.5 3 1.12 3 2.5-1.34 2.5-3 2.5\"/>\n  </svg>\n);\n\nconst AlertIcon = () => (\n  <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <circle cx=\"12\" cy=\"12\" r=\"10\"/>\n    <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"/>\n    <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"/>\n  </svg>\n);\n\nconst RefreshIcon = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <polyline points=\"23 4 23 10 17 10\"/>\n    <path d=\"M20.49 15a9 9 0 1 1-2.12-9.36L23 10\"/>\n  </svg>\n);\n\nfunction Dashboard() {\n  const { user } = useAuth();\n  const { fetchDashboard, fetchFaucetStatus: fetchCachedFaucetStatus, faucetStatus: cachedFaucetStatus, invalidateCache, settings } = useData();\n  const turnstile = useTurnstile(settings?.turnstile?.siteKey);\n  const [dashboardData, setDashboardData] = useState(null);\n  const [faucetStatus, setFaucetStatus] = useState(cachedFaucetStatus);\n  const [loading, setLoading] = useState(!user); // Don't show loading if we have cached user\n  const [claiming, setClaiming] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [successPopup, setSuccessPopup] = useState(null);\n  const [debugLogs, setDebugLogs] = useState([]);\n  \n  // Ad-related state for faucet claim\n  const [adProgress, setAdProgress] = useState(null); // { current: 1, total: 3, status: 'watching' | 'completed' | 'error' }\n  const adsgramScriptLoaded = useRef(false);\n  const adsgramBlockId = useRef(null);\n  const adsgramController = useRef(null);\n  const monetagScriptLoaded = useRef(false);\n  const monetagZoneId = useRef(null);\n  const adExtraScriptLoaded = useRef(false);\n  const adExtraPlacementId = useRef(null);\n  const adexoraScriptLoaded = useRef(false);\n  const adexoraAppId = useRef(null);\n\n  // Get Telegram user photo URL\n  const getTelegramPhotoUrl = () => {\n    try {\n      const tg = window.Telegram?.WebApp;\n      if (tg?.initDataUnsafe?.user?.photo_url) {\n        return tg.initDataUnsafe.user.photo_url;\n      }\n    } catch (e) {\n      console.log('Could not get Telegram photo');\n    }\n    return null;\n  };\n\n  const telegramPhotoUrl = getTelegramPhotoUrl();\n\n  // Debug logger helper\n  const logDebug = useCallback((message, data = null) => {\n    const timestamp = new Date().toLocaleTimeString();\n    const logEntry = `[${timestamp}] ${message}${data ? ': ' + JSON.stringify(data) : ''}`;\n    console.log(logEntry);\n    setDebugLogs(prev => [...prev.slice(-19), logEntry]); // Keep last 20 logs\n  }, []);\n\n  const fetchDashboardData = useCallback(async () => {\n    logDebug('Fetching dashboard data (with cache)...');\n    try {\n      const data = await fetchDashboard();\n      if (data) {\n        logDebug('Dashboard data received', { hasUser: !!data?.user });\n        setDashboardData(data);\n        setError(null);\n      }\n    } catch (err) {\n      const errorDetails = {\n        message: err.message,\n        status: err.response?.status,\n        isNetworkError: !err.response\n      };\n      logDebug('Dashboard fetch error', errorDetails);\n      setError(`Failed to load dashboard: ${err.response?.data?.message || err.message}`);\n      console.error('Dashboard error:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [fetchDashboard, logDebug]);\n\n  const fetchFaucetStatusData = useCallback(async () => {\n    logDebug('Fetching faucet status (with cache)...');\n    try {\n      const data = await fetchCachedFaucetStatus();\n      if (data) {\n        logDebug('Faucet status received', { canClaim: data?.canClaim });\n        setFaucetStatus(data);\n      }\n    } catch (err) {\n      logDebug('Faucet status error', { message: err.message, status: err.response?.status });\n      console.error('Faucet status error:', err);\n    }\n  }, [fetchCachedFaucetStatus, logDebug]);\n\n  useEffect(() => {\n    // Use cached data if available, but still fetch fresh data in background\n    if (cachedFaucetStatus) {\n      setFaucetStatus(cachedFaucetStatus);\n    }\n    fetchDashboardData();\n    fetchFaucetStatusData();\n  }, [fetchDashboardData, fetchFaucetStatusData, cachedFaucetStatus]);\n\n  // Countdown timer\n  useEffect(() => {\n    if (faucetStatus && !faucetStatus.canClaim && faucetStatus.remainingSeconds > 0) {\n      const timer = setInterval(() => {\n        setFaucetStatus(prev => {\n          if (!prev || prev.remainingSeconds <= 1) {\n            invalidateCache('faucet');\n            fetchFaucetStatusData();\n            return prev;\n          }\n          return { ...prev, remainingSeconds: prev.remainingSeconds - 1 };\n        });\n      }, 1000);\n      return () => clearInterval(timer);\n    }\n  }, [faucetStatus, fetchFaucetStatusData, invalidateCache]);\n\n  // Ad loading functions for faucet claim\n  const loadAdsgramScript = useCallback((blockId) => {\n    return new Promise((resolve, reject) => {\n      if (adsgramScriptLoaded.current && adsgramBlockId.current === blockId && adsgramController.current) {\n        resolve(adsgramController.current);\n        return;\n      }\n      const existingScript = document.getElementById('adsgram-script');\n      const initController = () => {\n        if (window.Adsgram) {\n          try {\n            const AdController = window.Adsgram.init({ blockId });\n            adsgramScriptLoaded.current = true;\n            adsgramBlockId.current = blockId;\n            adsgramController.current = AdController;\n            resolve(AdController);\n          } catch (err) {\n            reject(new Error('Failed to initialize Adsgram SDK'));\n          }\n        } else {\n          reject(new Error('Adsgram SDK not available'));\n        }\n      };\n      if (existingScript && window.Adsgram) {\n        initController();\n        return;\n      }\n      if (existingScript) existingScript.remove();\n      const script = document.createElement('script');\n      script.id = 'adsgram-script';\n      script.src = 'https://sad.adsgram.ai/js/sad.min.js';\n      script.async = true;\n      script.onload = () => setTimeout(() => initController(), 100);\n      script.onerror = () => reject(new Error('Failed to load Adsgram SDK'));\n      document.head.appendChild(script);\n    });\n  }, []);\n\n  const loadMonetagScript = useCallback((zoneId) => {\n    return new Promise((resolve, reject) => {\n      if (monetagScriptLoaded.current && monetagZoneId.current === zoneId) {\n        resolve();\n        return;\n      }\n      const existingScript = document.getElementById('monetag-script');\n      if (existingScript) existingScript.remove();\n      const script = document.createElement('script');\n      script.id = 'monetag-script';\n      script.src = '//libtl.com/sdk.js';\n      script.setAttribute('data-zone', zoneId);\n      script.setAttribute('data-sdk', `show_${zoneId}`);\n      script.onload = () => {\n        monetagScriptLoaded.current = true;\n        monetagZoneId.current = zoneId;\n        resolve();\n      };\n      script.onerror = () => reject(new Error('Failed to load Monetag script'));\n      document.head.appendChild(script);\n    });\n  }, []);\n\n  const loadAdExtraScript = useCallback((placementId) => {\n    return new Promise((resolve, reject) => {\n      if (adExtraScriptLoaded.current && adExtraPlacementId.current === placementId) {\n        resolve();\n        return;\n      }\n      const existingScript = document.getElementById('adextra-script');\n      if (existingScript) existingScript.remove();\n      const existingContainer = document.getElementById(placementId);\n      if (existingContainer) existingContainer.remove();\n      const container = document.createElement('div');\n      container.id = placementId;\n      document.body.appendChild(container);\n      const script = document.createElement('script');\n      script.id = 'adextra-script';\n      script.src = `https://partner.adextra.io/jt/${placementId}.js`;\n      script.async = true;\n      script.onload = () => {\n        adExtraScriptLoaded.current = true;\n        adExtraPlacementId.current = placementId;\n        resolve();\n      };\n      script.onerror = () => reject(new Error('Failed to load AdExtra script'));\n      document.head.appendChild(script);\n    });\n  }, []);\n\n  const loadAdexoraScript = useCallback((appId) => {\n    return new Promise((resolve, reject) => {\n      if (adexoraScriptLoaded.current && adexoraAppId.current === appId) {\n        resolve();\n        return;\n      }\n      const existingScript = document.getElementById('adexora-script');\n      if (existingScript) existingScript.remove();\n      const script = document.createElement('script');\n      script.id = 'adexora-script';\n      script.src = `https://adexora.com/cdn/ads.js?id=${appId}`;\n      script.onload = () => {\n        adexoraScriptLoaded.current = true;\n        adexoraAppId.current = appId;\n        resolve();\n      };\n      script.onerror = () => reject(new Error('Failed to load Adexora script'));\n      document.head.appendChild(script);\n    });\n  }, []);\n\n  // Show a single ad and return a promise\n  // STRICT: Only shows ads from providers that are explicitly configured by admin for faucet claim\n  // No fallback or alternative providers - if config is missing, the ad fails\n  const showSingleAd = useCallback(async (provider) => {\n    const { id, config } = provider;\n    \n    // Validate that provider has required config - no fallback allowed\n    if (!id || !config) {\n      return Promise.reject(new Error('Invalid provider configuration'));\n    }\n    \n    return new Promise((resolve, reject) => {\n      if (id === 'adsgram') {\n        if (!config.blockId) {\n          return reject(new Error('Adsgram not properly configured'));\n        }\n        loadAdsgramScript(config.blockId)\n          .then((AdController) => {\n            AdController.show()\n              .then(() => resolve())\n              .catch((result) => reject(new Error(result?.description || 'Ad not completed')));\n          })\n          .catch((err) => reject(err));\n      } else if (id === 'monetag') {\n        if (!config.zoneId) {\n          return reject(new Error('Monetag not properly configured'));\n        }\n        loadMonetagScript(config.zoneId)\n          .then(() => {\n            const tryShowAd = (attempts = 0) => {\n              const showFn = `show_${config.zoneId}`;\n              if (typeof window[showFn] === 'function') {\n                window[showFn]()\n                  .then(() => resolve())\n                  .catch(() => reject(new Error('Ad not completed')));\n              } else if (attempts < 10) {\n                setTimeout(() => tryShowAd(attempts + 1), 500);\n              } else {\n                reject(new Error('Ad provider failed to initialize'));\n              }\n            };\n            setTimeout(() => tryShowAd(0), 500);\n          })\n          .catch((err) => reject(err));\n      } else if (id === 'adextra') {\n        if (!config.placementId) {\n          return reject(new Error('AdExtra not properly configured'));\n        }\n        loadAdExtraScript(config.placementId)\n          .then(() => {\n            const tryShowAd = (attempts = 0) => {\n              if (typeof window.p_adextra === 'function') {\n                window.p_adextra(() => resolve(), () => reject(new Error('Ad not completed')));\n              } else if (attempts < 10) {\n                setTimeout(() => tryShowAd(attempts + 1), 500);\n              } else {\n                reject(new Error('Ad provider failed to initialize'));\n              }\n            };\n            setTimeout(() => tryShowAd(0), 500);\n          })\n          .catch((err) => reject(err));\n      } else if (id === 'adexora') {\n        if (!config.appId) {\n          return reject(new Error('Adexora not properly configured'));\n        }\n        loadAdexoraScript(config.appId)\n          .then(() => {\n            const tryShowAd = (attempts = 0) => {\n              if (typeof window.showAdexora === 'function') {\n                window.showAdexora()\n                  .then(() => resolve())\n                  .catch(() => reject(new Error('Ad not completed')));\n              } else if (attempts < 10) {\n                setTimeout(() => tryShowAd(attempts + 1), 500);\n              } else {\n                reject(new Error('Ad provider failed to initialize'));\n              }\n            };\n            setTimeout(() => tryShowAd(0), 500);\n          })\n          .catch((err) => reject(err));\n      } else {\n        // Unknown provider - strict enforcement, no fallback\n        reject(new Error(`Unknown ad provider: ${id}`));\n      }\n    });\n  }, [loadAdsgramScript, loadMonetagScript, loadAdExtraScript, loadAdexoraScript]);\n\n  const claimFaucet = async () => {\n    if (claiming) return;\n    \n    setClaiming(true);\n    setError(null);\n    setSuccess(null);\n\n    let actionToken = null;\n\n    try {\n      // STEP 1: Start faucet session to get action token\n      // This prevents direct API calls to /claim without going through proper flow\n      logDebug('Starting faucet session...');\n      const startResponse = await axios.post('/earnings/faucet/start');\n      actionToken = startResponse.data.actionToken;\n      const minTimeSeconds = startResponse.data.minTimeSeconds || 0;\n      const adProviders = startResponse.data.adProviders || [];\n      const totalAds = adProviders.length;\n      \n      logDebug('Faucet session started', { \n        tokenReceived: !!actionToken, \n        minTimeSeconds, \n        adCount: totalAds \n      });\n\n      // STEP 2: Show ads if any (this takes time, satisfying minTimeSeconds)\n      if (totalAds > 0) {\n        setAdProgress({ current: 0, total: totalAds, status: 'watching' });\n        \n        for (let i = 0; i < totalAds; i++) {\n          setAdProgress({ current: i + 1, total: totalAds, status: 'watching' });\n          \n          try {\n            await showSingleAd(adProviders[i]);\n          } catch (adError) {\n            // Log the error but continue to next ad (graceful degradation)\n            console.warn(`Ad ${i + 1} failed:`, adError.message);\n            // Short delay before next ad attempt\n            await new Promise(resolve => setTimeout(resolve, 500));\n          }\n        }\n        \n        setAdProgress({ current: totalAds, total: totalAds, status: 'completed' });\n        // Small delay to show completion\n        await new Promise(resolve => setTimeout(resolve, 500));\n      } else if (minTimeSeconds > 0) {\n        // No ads but we still need to wait minimum time\n        // The server will reject early claims anyway, but let's be nice to UX\n        logDebug(`Waiting minimum time: ${minTimeSeconds}s`);\n        await new Promise(resolve => setTimeout(resolve, minTimeSeconds * 1000));\n      }\n\n      // STEP 3: Claim the reward with action token\n      // Include Turnstile token if available (backend will bypass for Telegram users)\n      logDebug('Claiming faucet with action token...');\n      const response = await axios.post('/earnings/faucet/claim', {\n        actionToken,\n        turnstileToken: turnstile.token || undefined\n      });\n      \n      // Show success popup\n      setSuccessPopup({\n        type: 'faucet',\n        reward: response.data.reward,\n        newBalance: response.data.newBalance\n      });\n      invalidateCache('faucet');\n      invalidateCache('dashboard');\n      fetchDashboardData();\n      fetchFaucetStatusData();\n      \n      // Reset Turnstile after successful claim (if token was used)\n      if (turnstile.token) {\n        turnstile.reset();\n      }\n    } catch (error) {\n      const errorMessage = error.response?.data?.message || 'Failed to claim reward';\n      const errorCode = error.response?.data?.error;\n      \n      if (error.response?.status === 429) {\n        const remainingSeconds = error.response.data.remainingSeconds;\n        setError(`â° ${errorMessage || `Cooldown active. Wait ${remainingSeconds} seconds`}`);\n      } else if (errorCode === 'TOKEN_MIN_TIME_NOT_PASSED') {\n        setError(`â³ Please wait a moment and try again`);\n      } else if (errorCode === 'TOKEN_INVALID_OR_CONSUMED') {\n        setError('Session expired. Please try again.');\n        // Refresh faucet status to get latest state\n        fetchFaucetStatusData();\n      } else {\n        setError(errorMessage);\n      }\n      \n      logDebug('Faucet claim error', { \n        status: error.response?.status, \n        message: errorMessage,\n        error: errorCode \n      });\n      \n      // Reset Turnstile on error (if token was used)\n      if (turnstile.token) {\n        turnstile.reset();\n      }\n    } finally {\n      setClaiming(false);\n      setAdProgress(null);\n    }\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const getEarningIcon = (type) => {\n    const icons = {\n      faucet: <DropletIcon />,\n      task: <TaskIcon />,\n      referral: <UsersIcon />,\n      ads: <AdsIcon />,\n      bonus: <GiftIcon />\n    };\n    return icons[type] || <CoinIcon />;\n  };\n\n  if (loading) {\n    return (\n      <>\n        <Navbar />\n        <div className=\"container page-content\">\n          <div className=\"loading\">\n            <div className=\"loading-spinner\"></div>\n            <p>Loading dashboard...</p>\n          </div>\n        </div>\n        <BottomNav />\n      </>\n    );\n  }\n\n  if (error && !dashboardData) {\n    return (\n      <>\n        <Navbar />\n        <div className=\"container page-content\">\n          <div className=\"card\" style={{ textAlign: 'center', padding: '40px 20px' }}>\n            <div style={{ marginBottom: '16px', color: 'var(--warning-color)' }}><AlertIcon /></div>\n            <h3 style={{ marginBottom: '12px' }}>Failed to Load Dashboard</h3>\n            <p className=\"text-muted\" style={{ marginBottom: '20px' }}>{error}</p>\n            <button \n              className=\"btn btn-primary\"\n              onClick={() => {\n                setError(null);\n                setLoading(true);\n                fetchDashboardData();\n              }}\n            >\n              <RefreshIcon /> Try Again\n            </button>\n          </div>\n          \n          {/* Debug Panel */}\n          <div className=\"card\" style={{ marginTop: '16px', textAlign: 'left' }}>\n            <h4 style={{ marginBottom: '12px', fontSize: '14px' }}>ðŸ” Debug Info</h4>\n            <div style={{ fontSize: '11px', fontFamily: 'monospace', background: '#1a1a2e', color: '#0f0', padding: '12px', borderRadius: '8px', maxHeight: '200px', overflow: 'auto' }}>\n              <div style={{ marginBottom: '8px', color: '#ff0' }}>\n                API URL: {axios.defaults.baseURL}\n              </div>\n              <div style={{ marginBottom: '8px', color: '#ff0' }}>\n                Token: {localStorage.getItem('token') ? 'Present (' + localStorage.getItem('token').substring(0, 20) + '...)' : 'Missing'}\n              </div>\n              <div style={{ marginBottom: '8px', color: '#ff0' }}>\n                User ID: {user?.telegramId || 'N/A'}\n              </div>\n              <div style={{ borderTop: '1px solid #333', paddingTop: '8px', marginTop: '8px' }}>\n                {debugLogs.map((log, i) => (\n                  <div key={i} style={{ marginBottom: '4px', wordBreak: 'break-all' }}>{log}</div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n        <BottomNav />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"container page-content\">\n        {error && <div className=\"error\">{error}</div>}\n        {success && <div className=\"success\">{success}</div>}\n\n        {/* Ad Progress Overlay for Faucet Claim */}\n        {adProgress && (\n          <div className=\"modal-overlay\">\n            <div className=\"modal\" style={{ textAlign: 'center', padding: '40px' }}>\n              <div style={{ fontSize: '48px', marginBottom: '16px' }}>ðŸ“º</div>\n              <h3 style={{ marginBottom: '8px' }}>\n                {adProgress.status === 'completed' ? 'Ads Completed!' : 'Watching Ads...'}\n              </h3>\n              <p className=\"text-muted\" style={{ marginBottom: '16px' }}>\n                {adProgress.status === 'completed' \n                  ? 'Claiming your reward...' \n                  : `Please watch the ad to claim your reward`}\n              </p>\n              \n              {/* Progress indicator */}\n              <div style={{ \n                display: 'flex', \n                justifyContent: 'center', \n                gap: '8px', \n                marginBottom: '16px' \n              }}>\n                {Array.from({ length: adProgress.total }).map((_, i) => (\n                  <div \n                    key={i} \n                    style={{\n                      width: '12px',\n                      height: '12px',\n                      borderRadius: '50%',\n                      background: i < adProgress.current \n                        ? 'var(--success-color, #28a745)' \n                        : 'var(--border-color, #333)',\n                      transition: 'background 0.3s ease'\n                    }}\n                  />\n                ))}\n              </div>\n              \n              <p style={{ fontSize: '14px', color: 'var(--text-secondary)' }}>\n                Ad {adProgress.current} of {adProgress.total}\n              </p>\n              \n              {adProgress.status === 'watching' && (\n                <div className=\"loading-spinner\" style={{ margin: '16px auto 0' }}></div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Welcome Card */}\n        <div className=\"card card-gradient\">\n          <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\n            <div className=\"welcome-avatar\" style={telegramPhotoUrl ? { padding: 0, overflow: 'hidden' } : {}}>\n              {telegramPhotoUrl ? (\n                <img \n                  src={telegramPhotoUrl} \n                  alt=\"Profile\" \n                  style={{ \n                    width: '100%', \n                    height: '100%', \n                    objectFit: 'cover',\n                    borderRadius: '50%'\n                  }} \n                />\n              ) : (\n                user?.firstName?.[0]?.toUpperCase() || 'U'\n              )}\n            </div>\n            <div>\n              <h2 style={{ color: '#fff', marginBottom: '4px' }}>\n                Hello, {user?.firstName || 'User'}!\n              </h2>\n              <p style={{ color: 'rgba(255,255,255,0.8)', fontSize: '14px' }}>\n                Welcome back to your earning dashboard\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Stats Grid */}\n        <div className=\"stats-grid\">\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\"><WalletIcon /></div>\n            <div className=\"stat-value\">{user?.balance?.toFixed(5) || '0.00000'}</div>\n            <div className=\"stat-label\">Balance</div>\n            {settings?.currencyMode === 'points' && user?.balance > 0 && (\n              <div className=\"stat-usd-equivalent\">\n                â‰ˆ ${(user.balance / (settings?.pointsExchangeRate || 1000)).toFixed(5)}\n              </div>\n            )}\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\"><TrendUpIcon /></div>\n            <div className=\"stat-value\">{user?.totalEarnings?.toFixed(5) || '0.00000'}</div>\n            <div className=\"stat-label\">Total Earned</div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\"><WithdrawIcon /></div>\n            <div className=\"stat-value\">{user?.totalWithdrawals?.toFixed(5) || '0.00000'}</div>\n            <div className=\"stat-label\">Withdrawn</div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\"><UsersIcon /></div>\n            <div className=\"stat-value\">{user?.referralCount || 0}</div>\n            <div className=\"stat-label\">Referrals</div>\n          </div>\n        </div>\n\n        {/* Faucet Claim */}\n        {faucetStatus && (\n          <div className=\"card\" style={{ \n            background: 'var(--bg-card)',\n            border: '1px solid var(--border-color)',\n            borderRadius: '16px'\n          }}>\n            <div className=\"card-header\" style={{ borderBottom: '1px solid var(--border-color)', paddingBottom: '14px' }}>\n              <h2 className=\"card-title\" style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                <span className=\"card-icon\" style={{ \n                  background: 'linear-gradient(135deg, rgba(99, 102, 241, 0.12) 0%, rgba(139, 92, 246, 0.12) 100%)',\n                  borderRadius: '10px',\n                  padding: '8px',\n                  color: 'var(--primary-color)'\n                }}><DropletIcon /></span>\n                Faucet Claim\n              </h2>\n            </div>\n            \n            {faucetStatus.noAdsAvailable ? (\n              <div style={{ textAlign: 'center', padding: '24px 16px' }}>\n                <div style={{ \n                  fontSize: '48px', \n                  marginBottom: '12px', \n                  opacity: 0.6,\n                  filter: 'grayscale(1)'\n                }}>ðŸ“º</div>\n                <h4 style={{ marginBottom: '8px', color: 'var(--text-secondary)', fontSize: '15px' }}>Faucet Temporarily Unavailable</h4>\n                <p style={{ color: 'var(--text-muted)', fontSize: '13px' }}>\n                  No ad providers are currently configured. Please check back later.\n                </p>\n              </div>\n            ) : faucetStatus.canClaim ? (\n              <div style={{ \n                textAlign: 'center',\n                padding: '20px 0 8px',\n                background: 'linear-gradient(180deg, rgba(99, 102, 241, 0.05) 0%, transparent 100%)',\n                borderRadius: '12px',\n                margin: '8px -4px 0'\n              }}>\n                <div className=\"faucet-ready-icon\" style={{\n                  width: '64px',\n                  height: '64px',\n                  margin: '0 auto 16px',\n                  background: 'linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(52, 211, 153, 0.15) 100%)',\n                  borderRadius: '16px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  border: '2px solid rgba(16, 185, 129, 0.2)',\n                  color: '#10b981'\n                }}><GiftIcon /></div>\n                <p style={{ marginBottom: '16px', color: 'var(--text-secondary)', fontSize: '14px' }}>\n                  {faucetStatus.adProviders?.length > 0 \n                    ? `Watch ${faucetStatus.adProviders.length} ad${faucetStatus.adProviders.length > 1 ? 's' : ''} to claim your reward!`\n                    : 'Your reward is ready to claim!'}\n                </p>\n                \n                {/* Turnstile Verification - Hidden, works in background */}\n                {settings?.turnstile?.enabled && settings?.turnstile?.siteKey && (\n                  <>\n                    {/* Hidden container for automatic verification */}\n                    <div style={{ position: 'absolute', opacity: 0, pointerEvents: 'none', height: 0, overflow: 'hidden' }}>\n                      <Turnstile {...turnstile.turnstileProps} />\n                    </div>\n                    \n                    {/* Only show visible widget if there's an error or verification is needed */}\n                    {(turnstile.error || turnstile.needsInteraction) && (\n                      <div style={{ marginBottom: '16px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n                        <p style={{ fontSize: '13px', color: 'var(--text-secondary)', marginBottom: '8px' }}>\n                          Please complete the verification\n                        </p>\n                        <Turnstile\n                          siteKey={settings.turnstile.siteKey}\n                          onVerify={turnstile.handleVerify}\n                          onError={turnstile.handleError}\n                          onExpire={turnstile.handleExpire}\n                          appearance=\"always\"\n                        />\n                      </div>\n                    )}\n                  </>\n                )}\n                \n                <button \n                  className=\"btn btn-primary\" \n                  onClick={claimFaucet}\n                  disabled={claiming}\n                  style={{ \n                    width: '100%', \n                    maxWidth: '280px',\n                    padding: '14px 24px',\n                    borderRadius: '12px',\n                    fontSize: '15px',\n                    fontWeight: '600'\n                  }}\n                >\n                  {claiming ? (\n                    <>\n                      <div className=\"loading-spinner\" style={{ width: '18px', height: '18px', marginRight: '8px' }}></div>\n                      {adProgress ? 'Watching Ads...' : 'Claiming...'}\n                    </>\n                  ) : (\n                    <>\n                      {faucetStatus.adProviders?.length > 0 ? 'ðŸ“º ' : 'ðŸŽ '}\n                      Claim {faucetStatus.reward} Coins\n                    </>\n                  )}\n                </button>\n              </div>\n            ) : (\n              <div className=\"timer\" style={{ \n                background: 'linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%)',\n                borderRadius: '16px',\n                padding: '24px',\n                border: '1px solid rgba(99, 102, 241, 0.2)'\n              }}>\n                <div className=\"timer-value\" style={{ \n                  color: '#ffffff',\n                  fontSize: '48px',\n                  fontWeight: '800',\n                  textShadow: '0 2px 10px rgba(99, 102, 241, 0.3)',\n                  marginBottom: '8px'\n                }}>\n                  {formatTime(faucetStatus.remainingSeconds)}\n                </div>\n                <div className=\"timer-label\" style={{ \n                  color: 'rgba(255, 255, 255, 0.8)',\n                  fontSize: '13px',\n                  fontWeight: '500',\n                  letterSpacing: '0.5px'\n                }}>Next claim available in</div>\n                <div className=\"progress-bar\" style={{ \n                  marginTop: '20px', \n                  maxWidth: '280px', \n                  margin: '20px auto 0',\n                  height: '8px',\n                  background: 'rgba(255, 255, 255, 0.1)',\n                  borderRadius: '4px'\n                }}>\n                  <div \n                    className=\"progress-fill\" \n                    style={{ \n                      width: `${Math.max(0, 100 - (faucetStatus.remainingSeconds / (faucetStatus.cooldown || 300) * 100))}%`,\n                      background: 'linear-gradient(90deg, #6366f1 0%, #a855f7 100%)',\n                      boxShadow: '0 0 10px rgba(99, 102, 241, 0.5)'\n                    }}\n                  ></div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Quick Actions */}\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h2 className=\"card-title\">\n              <span className=\"card-icon\"><BoltIcon /></span>\n              Earn More\n            </h2>\n          </div>\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '12px' }}>\n            <Link to=\"/tasks\" className=\"action-card\" style={{ textDecoration: 'none' }}>\n              <div className=\"action-icon\"><TaskIcon /></div>\n              <div className=\"action-label\">Tasks</div>\n              <div className=\"action-sublabel\">Complete & Earn</div>\n            </Link>\n            <Link to=\"/ads\" className=\"action-card\" style={{ textDecoration: 'none' }}>\n              <div className=\"action-icon\"><AdsIcon /></div>\n              <div className=\"action-label\">Watch Ads</div>\n              <div className=\"action-sublabel\">Watch & Earn</div>\n            </Link>\n            <Link to=\"/referrals\" className=\"action-card\" style={{ textDecoration: 'none' }}>\n              <div className=\"action-icon\"><UsersIcon /></div>\n              <div className=\"action-label\">Referrals</div>\n              <div className=\"action-sublabel\">Invite & Earn</div>\n            </Link>\n            <Link to=\"/withdrawals\" className=\"action-card\" style={{ textDecoration: 'none' }}>\n              <div className=\"action-icon\"><WithdrawIcon /></div>\n              <div className=\"action-label\">Withdraw</div>\n              <div className=\"action-sublabel\">Cash Out</div>\n            </Link>\n          </div>\n        </div>\n\n        {/* Recent Earnings */}\n        {dashboardData?.recentEarnings && dashboardData.recentEarnings.length > 0 && (\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h2 className=\"card-title\">\n                <span className=\"card-icon\"><ListIcon /></span>\n                Recent Earnings\n              </h2>\n              <Link to=\"/earnings\" className=\"btn btn-outline\" style={{ padding: '8px 16px', fontSize: '14px' }}>\n                View All\n              </Link>\n            </div>\n            <div className=\"earnings-list\">\n              {dashboardData.recentEarnings.slice(0, 5).map((earning) => (\n                <div key={earning._id} className=\"earning-item\">\n                  <div className=\"earning-icon\">\n                    {getEarningIcon(earning.type)}\n                  </div>\n                  <div className=\"earning-details\">\n                    <div className=\"earning-description\">\n                      {earning.description || earning.type.charAt(0).toUpperCase() + earning.type.slice(1)}\n                    </div>\n                    <div className=\"earning-date\">\n                      {new Date(earning.createdAt).toLocaleString()}\n                    </div>\n                  </div>\n                  <div className=\"earning-amount\">\n                    +{earning.amount.toFixed(5)}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Stats Summary */}\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h2 className=\"card-title\">\n              <span className=\"card-icon\"><ChartIcon /></span>\n              Your Stats\n            </h2>\n          </div>\n          <div className=\"stats-list\">\n            <div className=\"stats-list-item\">\n              <span>Referral Earnings</span>\n              <span className=\"stats-list-value\">{user?.referralEarnings?.toFixed(5) || '0.00000'} coins</span>\n            </div>\n            <div className=\"stats-list-item\">\n              <span>Total Referrals</span>\n              <span className=\"stats-list-value\">{user?.referralCount || 0} users</span>\n            </div>\n            <div className=\"stats-list-item\">\n              <span>Member Since</span>\n              <span className=\"stats-list-value\">\n                {user?.createdAt ? new Date(user.createdAt).toLocaleDateString() : 'N/A'}\n              </span>\n            </div>\n            <div className=\"stats-list-item\">\n              <span>Status</span>\n              <span className={`badge badge-${user?.status === 'active' ? 'success' : 'warning'}`}>\n                {user?.status || 'Active'}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <BottomNav />\n      \n      {/* Success Popup for Faucet Claims */}\n      <SuccessPopup\n        show={!!successPopup}\n        onClose={() => setSuccessPopup(null)}\n        type={successPopup?.type || 'faucet'}\n        reward={successPopup?.reward}\n        currencyName=\"Coins\"\n        newBalance={successPopup?.newBalance}\n      />\n    </>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}